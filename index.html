<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <title>여봉이 더쿠 레벨 테스트</title>

  <!-- Open Graph 기본 -->
  <meta property="og:type" content="website"/>
  <meta property="og:title" content="여봉이 더쿠 레벨 테스트"/>
  <meta property="og:description" content="여봉이 더쿠 레벨 테스트 — 결과는 더쿠 레벨로 나와요"/>
  <meta property="og:image" content="https://bongstudiosad.com/img/og_default.png"/>
  <meta property="og:image:width" content="1200"/>
  <meta property="og:image:height" content="630"/>
  <meta property="og:url" content="https://bongstudiosad.com/"/>

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image"/>

  <style>
    body{margin:0;font-family:system-ui;background:#f3f6fb}
    .page{display:none}
    .page.active{display:block}
    .wrap{max-width:560px;margin:0 auto;padding:20px}
    .card{background:#fff;border-radius:16px;padding:16px;margin-bottom:12px}
    .btn{width:100%;padding:14px;border-radius:12px;border:none;font-weight:800}
    .kakao{background:#FEE500;color:#000}
  </style>
</head>

<body>
<div class="wrap">

  <!-- HOME -->
  <section id="page-home" class="page active">
    <div class="card">
      <h1>여봉이 더쿠 레벨 테스트</h1>
      <button class="btn" onclick="showPage('cover')">테스트 시작</button>
    </div>
  </section>

  <!-- COVER -->
  <section id="page-cover" class="page">
    <div class="card">
      <h2>여봉이 더쿠 레벨 테스트</h2>
      <button class="btn" onclick="startQuiz()">질문 시작</button>
    </div>
  </section>

  <!-- RESULT -->
  <section id="page-result" class="page">
    <div class="card">
      <h2 id="result-title">LV1 킹반인</h2>
      <img id="result-img" src="" style="width:100%;border-radius:12px"/>
      <button class="btn kakao" onclick="shareKakao()">카카오 공유하기</button>
    </div>
  </section>

</div>

<!-- Kakao SDK -->
<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js"></script>

<script>
/* ================= 기본 설정 ================= */
const SITE_URL = "https://bongstudiosad.com";

/* ================= 카카오 초기화 ================= */
Kakao.init("e9794a44d4c69a353097f55a960e6cab");

/* ================= 페이지 전환 ================= */
function showPage(id){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById("page-"+id).classList.add("active");
}

/* ================= 테스트/결과 ================= */
let currentResultKey = "kingbanin";

const resultMeta = {
  kingbanin:{
    title:"LV1 킹반인",
    image:`${SITE_URL}/img/result_kingbanin.png`
  },
  pyeongmin:{
    title:"LV2 평민 더쿠",
    image:`${SITE_URL}/img/result_pyeongmin.png`
  },
  knight:{
    title:"LV3 기사 더쿠",
    image:`${SITE_URL}/img/result_knight.png`
  },
  count:{
    title:"LV4 귀족 더쿠",
    image:`${SITE_URL}/img/result_count.png`
  },
  kingof:{
    title:"LV5 킹 오브 더쿠",
    image:`${SITE_URL}/img/result_kingof.png`
  }
};

function startQuiz(){
  // 테스트 끝났다고 가정 (샘플)
  currentResultKey = "knight";
  renderResult();
}

function renderResult(){
  const m = resultMeta[currentResultKey];
  document.getElementById("result-title").innerText = m.title;
  document.getElementById("result-img").src = m.image;
  showPage("result");
}

/* ================= 카카오 공유 ================= */
function shareKakao(){
  const m = resultMeta[currentResultKey];
  const shareUrl = `${SITE_URL}/share/${currentResultKey}.html`;

  Kakao.Share.sendDefault({
    objectType:"feed",
    content:{
      title:`여봉이 더쿠 레벨 테스트 - ${m.title}`,
      description:"내 더쿠 레벨은 이거였어!",
      imageUrl:m.image,
      link:{
        mobileWebUrl:shareUrl,
        webUrl:shareUrl
      }
    },
    buttons:[
      {
        title:"나도 테스트하기",
        link:{mobileWebUrl:shareUrl,webUrl:shareUrl}
      }
    ]
  });
}

/* ================= 공유 링크 진입 ================= */
(function(){
  const r = new URLSearchParams(location.search).get("r");
  if(r && resultMeta[r]){
    currentResultKey = r;
    renderResult();
  }
})();
</script>

</body>
</html>
