<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- ✅ Open Graph (카카오톡/페이스북 등 공유 미리보기) -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://bongstudiosad.com/" />
  <meta property="og:title" content="여봉이 더쿠 레벨 테스트" />
  <meta property="og:description" content="내가 왕이 될 상인가? 1분 컷으로 더쿠 레벨 측정!" />
  <meta property="og:image" content="https://bongstudiosad.com/img/og_default.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <!-- (선택) X(트위터) 미리보기 -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="여봉이 더쿠 레벨 테스트" />
  <meta name="twitter:description" content="내가 왕이 될 상인가? 1분 컷으로 더쿠 레벨 측정!" />
  <meta name="twitter:image" content="https://bongstudiosad.com/img/og_default.png" />

  <title>여봉이 더쿠 레벨 테스트</title>

  <!-- Kakao SDK -->
  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js"
    integrity="sha384-7Wbwq7bP0l7q2W7kzH5w+0o7zQwQ0u5Wm2c2t9oO7YxkzvQyP2Jm1Zr0b0d9Yb0b"
    crossorigin="anonymous"></script>

  <style>
    :root{
      --bg:#fff7f2;
      --card:#ffffff;
      --text:#111;
      --muted:#555;
      --accent:#ff6a00;
      --btn:#111;
      --btnText:#fff;
      --btnAlt:#ffe600;
      --btnAltText:#111;
      --btnX:#000;
      --btnXText:#fff;
      --radius:18px;
    }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    .wrap{
      max-width:420px;
      margin:0 auto;
      padding:18px 14px 40px;
    }

    .card{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:0 10px 24px rgba(0,0,0,.08);
      padding:18px 16px;
    }

    h1,h2,h3,p{ margin:0; }
    .mt8{ margin-top:8px; }
    .mt10{ margin-top:10px; }
    .mt12{ margin-top:12px; }
    .mt14{ margin-top:14px; }
    .mt16{ margin-top:16px; }
    .mt18{ margin-top:18px; }
    .mt20{ margin-top:20px; }
    .mt24{ margin-top:24px; }

    .center{ text-align:center; }

    .title{
      font-size:22px;
      font-weight:900;
      letter-spacing:-0.3px;
    }

    .sub{
      font-size:14px;
      color:var(--muted);
      line-height:1.4;
    }

    .btn {
      width:100%;
      border:none;
      border-radius:14px;
      padding:14px 12px;
      font-weight:800;
      cursor:pointer;
      font-size:15px;
      transition: transform .08s ease;
    }
    .btn:active{ transform:scale(.99); }

    .btnPrimary{ background:var(--btn); color:var(--btnText); }
    .btnAlt{ background:var(--btnAlt); color:var(--btnAltText); }
    .btnInsta{ background:#E1306C; color:#fff; }
    .btnX{ background:var(--btnX); color:var(--btnXText); }

    .page{ display:none; }
    .page.active{ display:block; }

    .progressWrap{
      height:10px;
      background:#eee;
      border-radius:999px;
      overflow:hidden;
    }
    .progressBar{
      height:100%;
      width:0%;
      background:var(--accent);
      transition: width .25s ease;
    }

    .qTitle{
      font-size:18px;
      font-weight:900;
      line-height:1.3;
    }

    .choice{
      margin-top:10px;
      background:#f7f7f7;
      border:1px solid #eee;
      border-radius:14px;
      padding:14px 12px;
      cursor:pointer;
      font-weight:800;
      line-height:1.3;
    }
    .choice:active{ transform:scale(.99); }

    .loading{
      display:flex;
      flex-direction:column;
      gap:12px;
      align-items:center;
      justify-content:center;
      padding:26px 8px;
    }
    .spinner{
      width:54px; height:54px;
      border-radius:50%;
      border:7px solid #eee;
      border-top-color:var(--accent);
      animation: spin 0.9s linear infinite;
    }
    @keyframes spin{ to{ transform:rotate(360deg);} }

    /* ✅ 결과 레이아웃 */
    .resultTop{
      border-radius:18px;
      overflow:hidden;
      margin-top:10px;
      border:1px solid #eee;
    }

    .resultLv{
      font-size:22px;
      font-weight:900;
      padding:16px 16px 10px;
      color:#000; /* ✅ LV 글씨색 검정 통일 */
      background:#fff;
    }

    .resultHeader{
      padding:14px 16px;
      color:#fff;
      font-weight:900;
      font-size:16px;
      line-height:1.3;
    }

    .resultImgBox{
      width:100%;
      aspect-ratio: 1 / 1;
      background:#fafafa;
      display:flex;
      align-items:center;
      justify-content:center;
      border-top:1px solid #eee;
      border-bottom:1px solid #eee;
    }
    .resultImgBox span{
      color:#999; font-weight:800;
    }

    .resultBody{
      padding:16px;
    }

    .quote{
      font-weight:900;
      font-size:16px;
      margin-bottom:10px;
    }

    .sectionTitle{
      font-weight:900;
      font-size:14px;
      margin-top:14px;
      margin-bottom:6px;
    }
    ul{
      margin:0;
      padding-left:18px;
    }
    li{
      margin:6px 0;
      color:#222;
      font-weight:700;
      line-height:1.35;
    }

    .shareRow{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:14px;
    }

    .shareMini{
      font-size:12px;
      color:#777;
      margin-top:8px;
      word-break:break-all;
    }

    /* ✅ 공유 팝업 */
    .overlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.45);
      display:none;
      align-items:flex-end;
      justify-content:center;
      padding:14px;
      z-index:9999;
    }
    .overlay.active{ display:flex; }
    .sheet{
      width:min(460px, 100%);
      background:#fff;
      border-radius:18px;
      box-shadow:0 10px 24px rgba(0,0,0,.2);
      padding:14px;
    }
    .sheetTitle{
      font-weight:900;
      font-size:16px;
      margin-bottom:10px;
    }
    .sheetBtns{
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    .copyToast{
      display:none;
      margin-top:10px;
      background:#111;
      color:#fff;
      padding:10px 12px;
      border-radius:12px;
      font-weight:800;
      font-size:13px;
      text-align:center;
    }
    .copyToast.active{ display:block; }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- ✅ 1페이지: 메인 -->
    <section id="page-home" class="page active">
      <div class="card center">
        <div class="title">여봉이 더쿠 레벨 테스트</div>
        <p class="sub mt10">여봉이의 놀이터</p>
        <button class="btn btnPrimary mt18" onclick="openIntro()">테스트 하러가기</button>
      </div>

      <!-- 쿠팡 배너 -->
      <div class="mt14 center">
        <a href="https://link.coupang.com/a/deL5IN" target="_blank" referrerpolicy="unsafe-url">
          <img src="https://ads-partners.coupang.com/banners/950717?subId=&traceId=V0-301-bae0f72e5e59e45f-I950717&w=320&h=100" alt="" style="width:100%; max-width:420px; border-radius:16px;">
        </a>
      </div>
    </section>

    <!-- ✅ 2페이지: 테스트 표지 -->
    <section id="page-intro" class="page">
      <div class="card">
        <div class="title center">여봉이 더쿠 레벨 테스트</div>
        <p class="sub center mt8">결과는 더쿠 레벨로 나와요</p>

        <div class="mt16" style="width:100%; aspect-ratio:1/1; border-radius:16px; background:#fafafa; display:flex; align-items:center; justify-content:center; border:1px solid #eee;">
          <span style="font-weight:900; color:#999;">여기에 테스트 표지용 이미지 넣기</span>
        </div>

        <button class="btn btnPrimary mt18" onclick="startQuiz()">시작하기</button>
        <button class="btn mt10" onclick="openHome()">뒤로가기</button>
      </div>
    </section>

    <!-- ✅ 3~7페이지: 질문 -->
    <section id="page-quiz" class="page">
      <div class="card">
        <div class="progressWrap">
          <div id="progressBar" class="progressBar"></div>
        </div>

        <div class="mt16">
          <div id="qTitle" class="qTitle">질문</div>
          <div id="choices"></div>
        </div>
      </div>
    </section>

    <!-- ✅ 8페이지: 로딩 -->
    <section id="page-loading" class="page">
      <div class="card loading">
        <div class="spinner"></div>
        <div style="font-weight:900;">결과 계산 중...</div>
        <div class="sub center">여봉이가 열심히 분석하고 있어!</div>
      </div>
    </section>

    <!-- ✅ 9페이지: 결과 -->
    <section id="page-result" class="page">
      <div class="card">

        <div class="resultTop">
          <div id="resultLv" class="resultLv">LV1. 킹반인</div>
          <div id="resultHeader" class="resultHeader">헤더</div>

          <div class="resultImgBox">
            <span>여기에 결과 이미지</span>
          </div>
        </div>

        <div class="resultBody">
          <div id="resultQuote" class="quote">"한 줄"</div>

          <div class="sectionTitle">요약</div>
          <div id="resultSummary" class="sub" style="white-space:pre-line;">요약</div>

          <div class="sectionTitle">성향 설명</div>
          <ul id="resultTraits"></ul>

          <div class="sectionTitle">행동 특징</div>
          <ul id="resultActions"></ul>

          <div class="sectionTitle">한마디</div>
          <div id="resultComment" class="sub" style="white-space:pre-line;">한마디</div>

          <div class="shareRow">
            <button class="btn btnAlt" onclick="openSharePopup()">공유하기</button>
          </div>
        </div>

      </div>
    </section>

  </div>

  <!-- ✅ 공유 팝업 -->
  <div id="shareOverlay" class="overlay" onclick="overlayClickClose(event)">
    <div class="sheet" onclick="event.stopPropagation()">
      <div class="sheetTitle">공유하기</div>
      <div class="sheetBtns">
        <button class="btn btnAlt" onclick="shareKakao()">카카오톡 공유하기</button>
        <button class="btn btnInsta" onclick="shareInsta()">인스타 공유하기</button>
        <button class="btn btnX" onclick="shareX()">X 공유하기</button>
        <button class="btn btnPrimary" onclick="copyLink()">링크 복사하기</button>
        <button class="btn" onclick="closeSharePopup()">닫기</button>
      </div>

      <div id="copyToast" class="copyToast">링크가 복사됐어!</div>
      <div class="shareMini mt10">https://bongstudiosad.com/</div>
    </div>
  </div>

<script>
  const SITE_URL = "https://bongstudiosad.com";

  /* ✅ 결과 레벨별 컬러 팔레트(테스트용) */
  const levelTheme = {
    kingbanin: { bg:"#000000", title:"#000000" },  // LV1 검정
    pyeongmin: { bg:"#8B5A2B", title:"#8B5A2B" },  // LV2 갈색
    knight:    { bg:"#2E7D32", title:"#2E7D32" },  // LV3 초록
    count:     { bg:"#6A1B9A", title:"#6A1B9A" },  // LV4 보라
    kingof:    { bg:"#B71C1C", title:"#B71C1C" },  // LV5 빨강
  };

  /* ✅ 질문 데이터 */
  const questions = [
    {
      q: "좋아하는 캐릭터/작품이 생기면?",
      a: [
        { text:"그냥 좋아한다", score:1 },
        { text:"굿즈가 있나 찾아본다", score:2 },
        { text:"SNS/커뮤니티까지 파고든다", score:3 },
      ]
    },
    {
      q: "굿즈 구매 기준은?",
      a: [
        { text:"필요하면 산다", score:1 },
        { text:"예쁘면 산다", score:2 },
        { text:"한정이면 무조건 산다", score:3 },
      ]
    },
    {
      q: "최애 소식이 뜨면?",
      a: [
        { text:"아~ 그렇구나", score:1 },
        { text:"캡쳐하고 친구에게 공유", score:2 },
        { text:"바로 덕질 루트 가동", score:3 },
      ]
    },
    {
      q: "코믹월드/행사 가면?",
      a: [
        { text:"구경만 한다", score:1 },
        { text:"몇 개는 산다", score:2 },
        { text:"동선/예산/리스트 준비", score:3 },
      ]
    },
    {
      q: "입덕 속도는?",
      a: [
        { text:"천천히", score:1 },
        { text:"적당히", score:2 },
        { text:"초고속", score:3 },
      ]
    }
  ];

  let currentIndex = 0;
  let totalScore = 0;
  let currentResultKey = "kingbanin";

  function showPage(name){
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
    document.getElementById(`page-${name}`).classList.add("active");
  }

  function openHome(){ showPage("home"); }
  function openIntro(){ showPage("intro"); }

  function startQuiz(){
    currentIndex = 0;
    totalScore = 0;
    currentResultKey = "kingbanin";
    resetShareCache();
    renderQuestion();
    showPage("quiz");
  }

  function renderQuestion(){
    const q = questions[currentIndex];
    document.getElementById("qTitle").textContent = q.q;

    const prog = ((currentIndex)/questions.length)*100;
    document.getElementById("progressBar").style.width = `${prog}%`;

    const choices = document.getElementById("choices");
    choices.innerHTML = "";

    q.a.forEach(item=>{
      const div = document.createElement("div");
      div.className = "choice";
      div.textContent = item.text;
      div.onclick = ()=> pick(item.score);
      choices.appendChild(div);
    });
  }

  function pick(score){
    totalScore += score;
    currentIndex++;
    if(currentIndex >= questions.length){
      showLoadingThenResult();
      return;
    }
    renderQuestion();
  }

  function showLoadingThenResult(){
    showPage("loading");
    setTimeout(()=>{
      decideResult();
      renderResult();
      showPage("result");
    }, 1200);
  }

  function decideResult(){
    // 점수 범위: 최소 5, 최대 15
    if(totalScore <= 6) currentResultKey = "kingbanin";
    else if(totalScore <= 9) currentResultKey = "pyeongmin";
    else if(totalScore <= 12) currentResultKey = "knight";
    else if(totalScore <= 14) currentResultKey = "count";
    else currentResultKey = "kingof";
  }

  /* ✅ 공유용 메타(카카오 공유 버튼에서 사용할 이미지) */
  const resultMeta = {
    kingbanin: { title:"LV1. 킹반인", desc:"아직은 킹반인... 하지만 언제든 더쿠의 길로 입문 가능!", imageUrl:`${SITE_URL}/img/og_default.png` },
    pyeongmin: { title:"LV2. 평민 더쿠", desc:"티는 안 내도 덕심이 차오르는 평민 더쿠!", imageUrl:`${SITE_URL}/img/og_default.png` },
    knight:   { title:"LV3. 기사 더쿠", desc:"최애를 위해 뭐든 할 수 있는 기사 더쿠!", imageUrl:`${SITE_URL}/img/og_default.png` },
    count:    { title:"LV4. 귀족 더쿠", desc:"굿즈 창고가 거의 왕국급인 귀족 더쿠!", imageUrl:`${SITE_URL}/img/og_default.png` },
    kingof:   { title:"LV5. 킹 오브 더쿠", desc:"더쿠 중의 더쿠, 킹 오브 더쿠! 이쯤 되면 인생이 콘텐츠다.", imageUrl:`${SITE_URL}/img/og_default.png` }
  };

  function getCurrentMeta() {
    return resultMeta[currentResultKey] || resultMeta.kingbanin;
  }

  /* ✅ 결과 상세 텍스트 데이터(행님 원문 기반) */
  const resultDetail = {
    kingbanin: {
      header: "LV1. 킹반인",
      oneline: "“아무것도 모르지만.. 아무것도 모르지 않는다!”",
      summary:
        "일반인과 더쿠의 경계선, 일반인이라 생각하지만,\n알고리즘의 지배를 받아가며 무엇이든 될수있는 단계",
      traits: [
        "나 이정도까진 몰라 ㅋㅋ",
        "어 ? 이거 쇼츠(릴스)로 봤던건데?",
        "이 가격의 굿즈를 산다고?!!",
      ],
      actions: [
        "좋아하는건 있지만 딥하게 들어가진 않는편",
        "덕질하는 사람을 보면 신기하면서도 신기함!",
        "아는게 있으면 신남 “ 오!!! 나 이거 본거같아!!!”",
      ],
      comment: "어느순간 “아!? 이걸왜 이제봤지..? 할 예정”",
    },

    pyeongmin: {
      header: "LV2. 평민 더쿠",
      oneline: "“입덕의 문턱… 이미 한 발 들어왔다!”",
      summary:
        "일상 속에 자연스럽게 스며든 덕질.\n티는 안 내지만 조용히 덕심이 차오르는 단계",
      traits: [
        "나 이 작품 좋아해~ 정도는 말할 수 있음",
        "굿즈 구경은 하는데… 결제는 고민함",
        "덕질 친구가 있으면 급 친해짐",
      ],
      actions: [
        "가끔 굿즈를 사지만 ‘필요해서’라고 합리화",
        "최애 소식 뜨면 저장은 해둠",
        "스스로는 아직 ‘더쿠 아니지’ 생각함",
      ],
      comment: "곧 ‘평민’에서 ‘기사’로 진급할 준비 완료!",
    },

    knight: {
      header: "LV3. 기사 더쿠",
      oneline: "“최애를 지키는 건 내 사명!”",
      summary:
        "최애를 위해 발 빠르게 움직이는 행동파.\n덕질 루트가 이미 자동화된 단계",
      traits: [
        "이미 관련 계정들 팔로우다 되어있음",
        "한정 굿즈? 알림 켜놨지",
        "최애 언급만 나오면 귀가 반응함",
      ],
      actions: [
        "행사/팝업 일정 체크는 기본",
        "굿즈 구매 동선까지 최적화",
        "덕질 정보 공유할 때 제일 신남",
      ],
      comment: "이 정도면 이미 ‘충성의 기사’ 인정!",
    },

    count: {
      header: "LV4. 귀족 더쿠",
      oneline: "“덕질은 취미가 아니라… 생활이다.”",
      summary:
        "덕질에 투자도 아낌없이 하는 상위권.\n굿즈 창고가 거의 왕국급인 단계",
      traits: [
        "굿즈는 ‘세트’로 모아야 마음이 편함",
        "한정판은 놓치면 잠을 못 잠",
        "덕질 캘린더가 따로 존재함",
      ],
      actions: [
        "굿즈 정리/보관도 체계적으로 함",
        "최애 생일/기념일 이벤트는 필참",
        "주변 사람을 입덕시키는 능력 보유",
      ],
      comment: "귀족의 덕질력… 곧 왕좌가 보인다!",
    },

    kingof: {
      header: "LV5. 킹 오브 더쿠",
      oneline: "“나는 덕질을 한다… 고로 존재한다!”",
      summary:
        "덕질 그 자체가 인생이 된 최상위.\n이쯤 되면 덕질이 아니라 하나의 문화 창조자",
      traits: [
        "입덕의 정석 가이드 투어",
        "새로운 형식의 굿즈, 컨텐츠, 밈을 생성하는 위대한 존재",
        "너 덕분에 방금 다른 더쿠가 탄생했어 !",
      ],
      actions: [
        "덕질 플랫폼/커뮤니티에서 영향력 있음",
        "굿즈/행사/컨텐츠 소비를 넘어 제작에 가까움",
        "주변 더쿠들의 정신적 지주 역할",
      ],
      comment: "킹 오브 더쿠… 이제 전설이야.",
    }
  };

  function renderResult(){
    const d = resultDetail[currentResultKey];
    const th = levelTheme[currentResultKey] || levelTheme.kingbanin;

    document.getElementById("resultLv").textContent = d.header;
    document.getElementById("resultHeader").textContent = d.oneline;
    document.getElementById("resultHeader").style.background = th.bg;

    document.getElementById("resultQuote").textContent = d.oneline;
    document.getElementById("resultSummary").textContent = d.summary;

    const traits = document.getElementById("resultTraits");
    traits.innerHTML = "";
    d.traits.forEach(t=>{
      const li=document.createElement("li");
      li.textContent=t;
      traits.appendChild(li);
    });

    const actions = document.getElementById("resultActions");
    actions.innerHTML = "";
    d.actions.forEach(a=>{
      const li=document.createElement("li");
      li.textContent=a;
      actions.appendChild(li);
    });

    document.getElementById("resultComment").textContent = d.comment;
  }

  /* ✅ 공유 팝업 */
  function openSharePopup(){
    document.getElementById("shareOverlay").classList.add("active");
  }
  function closeSharePopup(){
    document.getElementById("shareOverlay").classList.remove("active");
  }
  function overlayClickClose(e){
    closeSharePopup();
  }

  /* ✅ 링크 복사 */
  function copyLink(){
    const url = "https://bongstudiosad.com/";
    navigator.clipboard.writeText(url).then(()=>{
      const toast = document.getElementById("copyToast");
      toast.classList.add("active");
      setTimeout(()=>toast.classList.remove("active"), 1400);
    }).catch(()=>{
      alert("복사 실패! 브라우저 설정을 확인해줘.");
    });
  }

  /* ✅ 공유 캐시(결과가 바뀌면 공유 메타도 바뀌도록) */
  function resetShareCache(){
    // 필요시 확장용(현재는 placeholder)
  }

  /* ✅ 카카오 초기화 */
  const KAKAO_JS_KEY = "YOUR_KAKAO_JAVASCRIPT_KEY"; // ← 너가 쓰는 키 유지/교체
  if (window.Kakao && !Kakao.isInitialized()) {
    Kakao.init(KAKAO_JS_KEY);
  }

  /* ✅ 카카오톡 공유 */
  function shareKakao() {
    if (!window.Kakao || !Kakao.isInitialized()) {
      alert("카카오톡 공유 준비 중이야. 잠시 후 다시 시도해줘!");
      return;
    }

    const meta = getCurrentMeta();

    Kakao.Share.sendDefault({
      objectType: "feed",
      content: {
        title: `여봉이 더쿠 레벨 테스트 - ${meta.title}`,
        description: meta.desc,
        imageUrl: meta.imageUrl,   // ✅ og_default.png로 고정됨
        link: { mobileWebUrl: SITE_URL, webUrl: SITE_URL }
      },
      buttons: [
        {
          title: "테스트 하러가기",
          link: { mobileWebUrl: SITE_URL, webUrl: SITE_URL }
        }
      ]
    });
  }

  /* ✅ 인스타 공유(안내) */
  function shareInsta(){
    alert("인스타는 자동 공유가 제한돼서, 이미지 저장 후 스토리/DM으로 공유해줘!");
  }

  /* ✅ X 공유 */
  function shareX(){
    const meta = getCurrentMeta();
    const text = encodeURIComponent(`여봉이 더쿠 레벨 테스트 - ${meta.title}`);
    const url = encodeURIComponent(SITE_URL);
    window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, "_blank");
  }

  // 시작은 홈
  openHome();
</script>

</body>
</html>
