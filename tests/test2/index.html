<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ìœ ë ¹ ì„¸ìƒ ì† ë‚˜ëŠ”?</title>

  <!-- âœ… OG(í…ŒìŠ¤íŠ¸2 ë§í¬ìš©) -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="ì—¬ë´‰ì´ ì„±í–¥í…ŒìŠ¤íŠ¸" />
  <meta property="og:title" content="ìœ ë ¹ ì„¸ìƒ ì† ë‚˜ëŠ”?" />
  <meta property="og:description" content="ì—¬ê¸°ë¥¼ ëˆŒëŸ¬ í…ŒìŠ¤íŠ¸ í•˜ëŸ¬ ê°€ê¸°!" />
  <meta property="og:url" content="https://bongstudiosad.com/tests/test2/" />
  <meta property="og:image" content="https://bongstudiosad.com/img/og_default.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <style>
    body { margin:0; font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif; background:#f5f5f7; color:#222; }
    .app { max-width:480px; margin:0 auto; min-height:100vh; padding:20px 16px 40px; box-sizing:border-box; }
    .card { background:#fff; border-radius:18px; box-shadow:0 6px 24px rgba(0,0,0,.08); padding:18px 16px; margin-bottom:14px; }
    .topbar { display:flex; align-items:center; justify-content:space-between; padding:10px 2px 14px; }
    .brand { font-weight:900; letter-spacing:-0.02em; font-size:16px; color:#331a66; display:flex; align-items:center; gap:8px; }
    .brand-badge { font-size:12px; font-weight:900; background:#efe7ff; padding:4px 10px; border-radius:999px; color:#5a2dce; }
    .nav { display:flex; gap:10px; align-items:center; }
    .nav a { text-decoration:none; font-size:12px; font-weight:800; color:#5a2dce; background:#efe7ff; padding:8px 12px; border-radius:999px; }
    .title { font-size:22px; font-weight:900; letter-spacing:-0.03em; margin:0 0 8px; color:#2b164f; }
    .subtitle { margin:0; font-size:14px; line-height:1.5; color:#444; }

    .btn { width:100%; border:none; border-radius:14px; padding:14px 12px; font-size:15px; font-weight:900; cursor:pointer; transition:transform .08s ease; }
    .btn:active { transform:scale(0.99); }
    .btn-primary { background:#6d4aff; color:#fff; }
    .btn-ghost { background:#f0ecff; color:#5a2dce; }
    .btn-black { background:#111; color:#fff; }
    .btn-yellow { background:#ffe500; color:#111; }
    .btn-row { display:grid; grid-template-columns:1fr; gap:10px; margin-top:14px; }

    .page { display:none; }
    .page.active { display:block; }

    .q-title { font-size:18px; font-weight:900; margin:0 0 10px; color:#2b164f; letter-spacing:-0.02em; }
    .options { display:grid; gap:10px; }
    .opt { border:1px solid rgba(0,0,0,0.10); border-radius:14px; padding:14px 12px; background:#fff; cursor:pointer; display:flex; align-items:center; justify-content:space-between; gap:10px; font-weight:800; line-height:1.35; }
    .opt:active { transform:scale(0.995); }
    .opt small { font-weight:800; color:#5a2dce; background:#efe7ff; padding:6px 10px; border-radius:999px; white-space:nowrap; }

    .progress-wrap { margin-top:14px; }
    .progress { width:100%; height:10px; border-radius:999px; background:rgba(109,74,255,0.16); overflow:hidden; }
    .progress > div { height:100%; width:0%; background:#6d4aff; border-radius:999px; transition:width .25s ease; }
    .progress-label { margin-top:8px; font-size:12px; font-weight:900; color:#5a2dce; display:flex; justify-content:space-between; }

    .loading-box { display:grid; gap:12px; align-items:center; justify-items:center; padding:26px 0 6px; }
    .spinner { width:46px; height:46px; border:6px solid rgba(109,74,255,0.18); border-top-color:#6d4aff; border-radius:999px; animation:spin .9s linear infinite; }
    @keyframes spin { to { transform:rotate(360deg); } }

    .result-head { display:grid; gap:10px; }
    .poster { border-radius:16px; overflow:hidden; background:#111; color:#fff; padding:14px 14px 12px; display:grid; gap:10px; }
    .poster-title { font-size:14px; font-weight:900; opacity:.9; }
    .poster-big { font-size:20px; font-weight:1000; letter-spacing:-0.03em; margin:0; }
    .poster-img { width:100%; border-radius:14px; display:block; background:#000; object-fit:cover; aspect-ratio:1/1; }

    .result-table { width:100%; border-collapse:collapse; border-radius:14px; overflow:hidden; }
    .result-table th, .result-table td { border-top:1px solid rgba(0,0,0,0.08); padding:12px 10px; vertical-align:top; font-size:14px; line-height:1.55; }
    .result-table th { width:92px; font-weight:1000; color:#2b164f; background:rgba(109,74,255,0.06); }
    .highlight { font-weight:900; color:#5a2dce; }

    .ably-banner, .coupang-banner { display:block; margin:12px 0 0; border-radius:16px; overflow:hidden; box-shadow:0 6px 22px rgba(0,0,0,.10); }
    .ably-banner img, .coupang-banner img { display:block; width:100%; height:auto; }

    footer { margin-top:18px; font-size:12px; color:#666; text-align:center; }
    footer a { color:#5a2dce; font-weight:900; text-decoration:none; }

    /* âœ… ë‹¨ì§/ì›ìˆ˜ ìœ ë ¹: ì¢Œìš° ì´ë¯¸ì§€ ì¹´ë“œ (ë‹¨ì§=ì—°í•œì´ˆë¡, ì›ìˆ˜=ì—°í•œë¹¨ê°•) */
    .compat-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    .compat-item{
      border:2px solid rgba(0,0,0,0.10);
      border-radius:14px;
      padding:10px;
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:120px;
      box-sizing:border-box;
    }
    .compat-item.buddy{
      border-color: rgba(120, 220, 140, 0.60);
    }
    .compat-item.enemy{
      border-color: rgba(255, 120, 120, 0.60);
    }
    .compat-wrap{
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .compat-thumb{
      width:96px;
      height:96px;
      border-radius:14px;
      object-fit:cover;
      display:block;
      background:#f5f5f7;
    }
    .compat-label{
      position:absolute;
      top:-10px;
      left:50%;
      transform:translateX(-50%);
      font-size:11px;
      font-weight:900;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(120, 220, 140, 0.18);
      color:#176a2d;
      white-space:nowrap;
    }
    .compat-item.enemy .compat-label{
      background: rgba(255, 120, 120, 0.18);
      color:#7a1a1a;
    }
  </style>

  <!-- Kakao SDK -->
  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js"
    integrity="sha384-8bJ9Et8+GQ2x8xqF3cEZR3H6zQpX4z4W6qJd2m8q6i4yZxQzQd3o+2aN4c5f4F3V"
    crossorigin="anonymous"></script>
</head>

<body>
  <div class="app">
    <!-- Topbar -->
    <div class="topbar">
      <div class="brand">
        ë´‰ ìŠ¤íŠœë””ì˜¤'s
        <span class="brand-badge">TEST</span>
      </div>
      <div class="nav">
        <a href="https://bongstudiosad.com/">HOME</a>
        <a href="https://bongstudiosad.com/tests/">TESTS</a>
      </div>
    </div>

    <!-- Page 0: ë©”ì¸ -->
    <section class="page active" id="page-home">
      <div class="card">
        <h1 class="title">ìœ ë ¹ ì„¸ìƒ ì† ë‚˜ëŠ”?</h1>
        <p class="subtitle">ê·€ì‹  ì„¸ìƒ ì†, ë‹¹ì‹ ì€ ì–´ë–¤ íƒ€ì…ì¼ê¹Œ? 6ë¬¸í•­ìœ¼ë¡œ í™•ì¸í•´ë³´ì ğŸ‘»</p>

        <div class="btn-row">
          <button class="btn btn-primary" id="btn-start">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button>
          <button class="btn btn-ghost" id="btn-go-tests">ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ ë³´ê¸°</button>
        </div>
      </div>

      <!-- ì¿ íŒ¡ ë°°ë„ˆ -->
      <a class="coupang-banner" href="https://link.coupang.com/a/deL5IN" target="_blank" referrerpolicy="unsafe-url">
        <img src="https://ads-partners.coupang.com/banners/950717?subId=&traceId=V0-301-bae0f72e5e59e45f-I950717&w=320&h=100" alt="">
      </a>

      <footer>
        Â© ë´‰ ìŠ¤íŠœë””ì˜¤'s Â· <a href="https://bongstudiosad.com/">bongstudiosad.com</a>
      </footer>
    </section>

    <!-- Page 1: í‘œì§€ -->
    <section class="page" id="page-cover">
      <div class="card">
        <h2 class="title" style="margin-bottom:6px;">í…ŒìŠ¤íŠ¸ ì•ˆë‚´</h2>
        <p class="subtitle">ì´ 6ë¬¸í•­! ëë‚˜ë©´ ê²°ê³¼ + ë‹¨ì§/ì›ìˆ˜ ìœ ë ¹ê¹Œì§€ ë°”ë¡œ ê³µê°œ ğŸ‘€</p>
        <div class="btn-row">
          <button class="btn btn-primary" id="btn-cover-start">ì‹œì‘!</button>
          <button class="btn btn-ghost" id="btn-cover-back">ë’¤ë¡œ</button>
        </div>
      </div>
    </section>

    <!-- Page 2~7: ì§ˆë¬¸ -->
    <section class="page" id="page-quiz">
      <div class="card">
        <h2 class="q-title" id="q-title">ì§ˆë¬¸</h2>
        <div class="options" id="q-options"></div>

        <div class="progress-wrap">
          <div class="progress"><div id="progress-bar"></div></div>
          <div class="progress-label">
            <span id="progress-text">1 / 6</span>
            <span>ê·€ì‹ ë ¥ ìƒìŠ¹ì¤‘â€¦</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Page 8: ë¡œë”© -->
    <section class="page" id="page-loading">
      <div class="card">
        <div class="loading-box">
          <div class="spinner"></div>
          <div style="font-weight:1000;color:#2b164f;">ê²°ê³¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</div>
          <div style="font-size:13px;color:#666;">ê·€ì‹  ì‚¬íšŒì—ì„œ íšŒì˜ ì¤‘ì´ì•¼. ì ê¹ë§Œ!</div>
        </div>
      </div>
    </section>

    <!-- Page 9: ê²°ê³¼ -->
    <section class="page" id="page-result">
      <div class="card result-head">
        <div class="poster">
          <div class="poster-title" id="poster-header">ê²°ê³¼</div>
          <h2 class="poster-big" id="result-title">ë‹¹ì‹ ì˜ ê·€ì‹  íƒ€ì…</h2>
          <img class="poster-img" id="result-img" src="https://bongstudiosad.com/img/og_default.png" alt="ê²°ê³¼ ì´ë¯¸ì§€">
        </div>

        <table class="result-table">
          <tr>
            <th>í•œì¤„</th>
            <td id="detail-oneline"></td>
          </tr>
          <tr>
            <th>ìš”ì•½</th>
            <td id="detail-summary"></td>
          </tr>
          <tr>
            <th>ì„±í–¥</th>
            <td id="detail-traits"></td>
          </tr>
          <tr>
            <th>í–‰ë™</th>
            <td id="detail-actions"></td>
          </tr>

          <!-- âœ… ë‹¨ì§/ì›ìˆ˜: ì¢Œ(ë‹¨ì§) ìš°(ì›ìˆ˜) ì´ë¯¸ì§€ -->
          <tr>
            <th>ë‹¨ì§/ì›ìˆ˜</th>
            <td id="detail-compat"></td>
          </tr>

          <tr>
            <th>ì½”ë©˜íŠ¸</th>
            <td id="detail-comment" class="highlight"></td>
          </tr>
        </table>
      </div>

      <!-- ì—ì´ë¸”ë¦¬ ë°°ë„ˆ -->
      <a class="ably-banner" href="https://ably.onelink.me/R1nE/8b0c6f3f" target="_blank" rel="noopener">
        <img src="https://bongstudiosad.com/img/ably_banner.png" alt="ì—ì´ë¸”ë¦¬ ë°°ë„ˆ">
      </a>

      <div class="card">
        <h3 class="title" style="font-size:18px;margin-bottom:6px;">ê³µìœ í•˜ê¸°</h3>
        <p class="subtitle">ì¹œêµ¬ì—ê²Œ ê²°ê³¼ ê³µìœ í•˜ê³  ê°™ì´ í…ŒìŠ¤íŠ¸í•´ë´!</p>

        <div class="btn-row">
          <button class="btn btn-yellow" id="btn-share-kakao">ì¹´ì¹´ì˜¤ ê³µìœ í•˜ê¸°</button>
          <button class="btn btn-black" id="btn-share-x">X ê³µìœ í•˜ê¸°</button>
          <button class="btn btn-ghost" id="btn-copy-link">ë§í¬ ë³µì‚¬í•˜ê¸°</button>
          <button class="btn btn-primary" id="btn-retry">ë‚˜ë„ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
        </div>

        <div id="copy-status" style="margin-top:10px;font-size:12px;font-weight:900;color:#5a2dce;"></div>
      </div>

      <footer>
        Â© ë´‰ ìŠ¤íŠœë””ì˜¤'s Â· <a href="https://bongstudiosad.com/">bongstudiosad.com</a>
      </footer>
    </section>
  </div>

  <script>
  /**********************
   * ê¸°ë³¸ ì„¤ì •
   **********************/
  const SITE_URL = "https://bongstudiosad.com";
  const TEST_URL = `${SITE_URL}/tests/test2/`;

  // âœ… ì¹´ì¹´ì˜¤ ì´ˆê¸°í™” (í–‰ë‹˜ í‚¤ë¡œ êµì²´)
  const KAKAO_JS_KEY = "YOUR_KAKAO_JAVASCRIPT_KEY";
  if (window.Kakao && !Kakao.isInitialized()) {
    Kakao.init(KAKAO_JS_KEY);
  }

  /**********************
   * ê²°ê³¼ ë©”íƒ€ (íƒ€ì´í‹€/ì„¤ëª…/ì´ë¯¸ì§€)
   **********************/
  const resultMeta = {
    witch:   { title:"ìœ„ì¹˜ë´‰",   desc:"ëª¨ë“  ê±¸ ê¿°ëš«ì–´ë³´ëŠ” ê³„íší˜• ê·€ì‹ ", imageUrl:`${SITE_URL}/img/result_witch.png` },
    mummy:   { title:"ë¯¸ë¼ë´‰",   desc:"ëê¹Œì§€ ë²„í‹°ëŠ” ì§‘ë…í˜• ê·€ì‹ ",     imageUrl:`${SITE_URL}/img/result_mummy.png` },
    bat:     { title:"ë°•ì¥ë´‰",   desc:"ë°¤ì—ë§Œ ë‚˜íƒ€ë‚˜ëŠ” ììœ  ê·€ì‹ ",       imageUrl:`${SITE_URL}/img/result_bat.png` },
    ghost:   { title:"ìœ ë ¹ë´‰",   desc:"ì¡°ìš©í•˜ì§€ë§Œ ì¡´ì¬ê° ìˆëŠ” ê·€ì‹ ",     imageUrl:`${SITE_URL}/img/result_ghost.png` },
    reaper:  { title:"ì €ìŠ¹ë´‰",   desc:"ë£°ê³¼ ì§ˆì„œë¥¼ ì§€í‚¤ëŠ” ì €ìŠ¹ ë‹´ë‹¹",     imageUrl:`${SITE_URL}/img/result_reaper.png` },
    frank:   { title:"í”„ë‘ì¼„ë´‰", desc:"í˜ì€ ì„¸ì§€ë§Œ ë§ˆìŒì€ ìˆœí•œ ê·€ì‹ ",     imageUrl:`${SITE_URL}/img/result_frank.png` },
    pumpkin: { title:"íŒí‚¨ë´‰",   desc:"ë¶„ìœ„ê¸° ë©”ì´ì»¤ ì¥ë‚œê¾¸ëŸ¬ê¸° ê·€ì‹ ",     imageUrl:`${SITE_URL}/img/result_pumpkin.png` },
    gumiho:  { title:"êµ¬ë¯¸í˜¸ë´‰", desc:"ì„¼ìŠ¤ì™€ ë§¤ë ¥ìœ¼ë¡œ íŒì„ í”ë“œëŠ” ê·€ì‹ ",  imageUrl:`${SITE_URL}/img/result_gumiho.png` },
    count:   { title:"ë°±ì‘ë´‰",   desc:"í’ˆê²© ìˆëŠ” ê³ ë…í•œ ì¹´ë¦¬ìŠ¤ë§ˆ ê·€ì‹ ",    imageUrl:`${SITE_URL}/img/result_count.png` }
  };

  // âœ… ê²°ê³¼ íƒ€ì´í‹€(ì˜ˆ: 'ì €ìŠ¹ë´‰') -> resultMeta key ì°¾ê¸°
  function findKeyByTitle(title) {
    if (!title) return null;
    for (const [k, v] of Object.entries(resultMeta)) {
      if (v && v.title === title) return k;
    }
    return null;
  }

  // âœ… ê²°ê³¼ íƒ€ì´í‹€ -> ì´ë¯¸ì§€ URL ê°€ì ¸ì˜¤ê¸° (ì—†ìœ¼ë©´ ê¸°ë³¸ ì´ë¯¸ì§€)
  function getImageUrlByTitle(title) {
    const key = findKeyByTitle(title);
    if (key && resultMeta[key] && resultMeta[key].imageUrl) return resultMeta[key].imageUrl;
    return `${SITE_URL}/img/og_default.png`;
  }

  /* ========= í…Œë§ˆ(ì›í•˜ë©´ ë‚˜ì¤‘ì— ìºë¦­í„°ë³„ë¡œ ë³€ê²½ ê°€ëŠ¥) ========= */
  const themeMap = {
    witch:   { posterBg:"#2b164f", accent:"#6d4aff" },
    mummy:   { posterBg:"#1b2b2a", accent:"#2abf9c" },
    bat:     { posterBg:"#1d1530", accent:"#a36bff" },
    ghost:   { posterBg:"#121820", accent:"#4aa3ff" },
    reaper:  { posterBg:"#141414", accent:"#ffd166" },
    frank:   { posterBg:"#1a2a1a", accent:"#6bd968" },
    pumpkin: { posterBg:"#2a1a12", accent:"#ff8a3d" },
    gumiho:  { posterBg:"#2a121a", accent:"#ff4a8d" },
    count:   { posterBg:"#111827", accent:"#9ca3af" }
  };

  function applyTheme(key){
    const t = themeMap[key] || themeMap.witch;
    document.querySelector(".poster").style.background = t.posterBg;
    const bar = document.getElementById("progress-bar");
    if (bar) bar.style.background = t.accent;
  }

  /**********************
   * ê²°ê³¼ ë””í…Œì¼
   **********************/
  const resultDetail = {
    witch: {
      oneline: "â€œíë¦„ì€ ë‚´ê°€ ë‹¤ ë³´ê³  ìˆë‹¤.â€",
      summary: "ì§ì ‘ ë‚˜ì„œì§„ ì•Šì§€ë§Œ, ê·€ì‹  ì‚¬íšŒì˜ íŒì„ ì½ê³  ì •ë¦¬í•˜ëŠ” íƒ€ì….",
      traits: ["ì „ì²´ ìƒí™©ì„ í•œ ë²ˆì— íŒŒì•…", "ë§ì€ ì§§ê³  í•µì‹¬ë§Œ", "í˜¼ë€ì¼ìˆ˜ë¡ ì¹¨ì°©í•¨"],
      actions: ["ë’¤ì—ì„œ ì •ë¦¬ â†’ ë°©í–¥ ì œì‹œ", "í•„ìš”í•  ë•Œë§Œ í•œ ë°©", "ê°ì • ê³¼ì—´ë˜ë©´ ìë™ ì œë™"],
      match: ["ì €ìŠ¹ë´‰", "ìœ ë ¹ë´‰"],
      mismatch: ["íŒí‚¨ë´‰", "ë°•ì¥ë´‰"],
      comment: "ë„ˆ ì—†ìœ¼ë©´ ê·€ì‹  ì‚¬íšŒ íšŒì˜ê°€ ëë‚˜ì§ˆ ì•Šì•„."
    },
    mummy: {
      oneline: "â€œëŠë ¤ë„ ëê¹Œì§€ ë‚¨ì•„ìˆë‹¤.â€",
      summary: "í¬ê¸°ë¼ëŠ” ë‹¨ì–´ê°€ ì—†ëŠ” ì§‘ë…í˜•. ì¡°ìš©íˆ ë²„í‹°ë‹¤ ë§ˆì§€ë§‰ì— ì—­ì „í•œë‹¤.",
      traits: ["ëˆê¸° ìµœìƒ", "í•œ ë²ˆ ì •í•˜ë©´ ì•ˆ ë°”ê¿ˆ", "ë¬´ì‹¬í•œ ë“¯ ê°•í•¨"],
      actions: ["ëê¹Œì§€ í•´ê²° ì‹œë„", "ì‰½ê²Œ í”ë“¤ë¦¬ì§€ ì•ŠìŒ", "ì‚¬ë¼ì§€ì§€ ì•ŠëŠ” ì¡´ì¬ê°"],
      match: ["í”„ë‘ì¼„ë´‰", "ì €ìŠ¹ë´‰"],
      mismatch: ["íŒí‚¨ë´‰", "êµ¬ë¯¸í˜¸ë´‰"],
      comment: "ë„ˆëŠ” â€˜ëê¹Œì§€ ì‚´ì•„ë‚¨ëŠ” ê·€ì‹ â€™ ê·¸ ìì²´ì•¼."
    },
    bat: {
      oneline: "â€œë¶„ìœ„ê¸°? ë‚´ê°€ ë°”ê¿”ì¤„ê²Œ.â€",
      summary: "ë³€ì¹™, ë°˜ì „, ë³€ìˆ˜ ë‹´ë‹¹. ì–´ë””ë¡œ íŠˆì§€ ëª°ë¼ì„œ ì¬ë¯¸ìˆëŠ” íƒ€ì….",
      traits: ["ì¦‰í¥ë ¥/ì„¼ìŠ¤ ì¢‹ìŒ", "ê¸°ë¶„ ë”°ë¼ ë¬´ë“œ ë³€í™”", "ê·œì¹™ë³´ë‹¤ ê°ê°"],
      actions: ["ê°‘ìê¸° ë¶„ìœ„ê¸° ì „í™˜", "ìƒëŒ€ ë°˜ì‘ ë³´ë©° í”Œë ˆì´", "ì‹¬ì‹¬í•˜ë©´ íŒì„ í”ë“¦"],
      match: ["íŒí‚¨ë´‰", "êµ¬ë¯¸í˜¸ë´‰"],
      mismatch: ["ì €ìŠ¹ë´‰", "ë°±ì‘ë´‰"],
      comment: "ë„ˆëŠ” â€˜ê·€ì‹  ì‚¬íšŒì˜ ë³€ì¹™ ì¹´ë“œâ€™ë‹¤."
    },
    ghost: {
      oneline: "â€œì•ˆ ë³´ì´ëŠ”ë°â€¦ ì œì¼ ì¤‘ìš”í•œ ì• .â€",
      summary: "ëˆˆì— ë„ì§„ ì•Šì§€ë§Œ í•­ìƒ í•µì‹¬ì— ìˆë‹¤. ì¡°ìš©íˆ ì¡´ì¬ë¡œ íŒì„ ì¡ëŠ” íƒ€ì….",
      traits: ["ë‚®ì€ ì¡´ì¬ê°, ë†’ì€ ì˜í–¥ë ¥", "ê´€ì°°ë ¥ ì¢‹ìŒ", "í•„ìš”í•  ë•Œë§Œ ë“±ì¥"],
      actions: ["ì‚¬ëŒ ë§ì€ ê³³ì—ì„œ ê´€ì°°", "ê²°ì •ì  ìˆœê°„ì— ë“±ì¥", "ë¶„ìœ„ê¸° íŒŒì•… ë¹ ë¦„"],
      match: ["ìœ„ì¹˜ë´‰", "ë°±ì‘ë´‰"],
      mismatch: ["íŒí‚¨ë´‰", "í”„ë‘ì¼„ë´‰"],
      comment: "ë„ˆëŠ” â€˜ìˆì–´ì•¼ ì‹œìŠ¤í…œì´ ëŒì•„ê°€ëŠ” ìœ ë ¹â€™ì´ë‹¤."
    },
    reaper: {
      oneline: "â€œì„  ë„˜ìœ¼ë©´ ë°”ë¡œ ì»·.â€",
      summary: "ê·€ì‹  ì‚¬íšŒì˜ ì§ˆì„œë¥¼ ë‹´ë‹¹. ë£°ì„ ì§€í‚¤ê³  ê¸°ì¤€ì´ ëª…í™•í•œ íƒ€ì….",
      traits: ["ê¸°ì¤€ í™•ì‹¤", "ì •ì˜ê°/ì±…ì„ê°", "í•  ë§ì€ í•¨"],
      actions: ["ì§ˆì„œ ì •ë¦¬", "ë¶ˆê³µì • ì°¸ê¸° í˜ë“¦", "ê²°ì •ì€ ë¹ ë¦„"],
      match: ["ìœ„ì¹˜ë´‰", "ë¯¸ë¼ë´‰"],
      mismatch: ["ë°•ì¥ë´‰", "íŒí‚¨ë´‰"],
      comment: "ë„ˆëŠ” â€˜ê·€ì‹  ì‚¬íšŒì˜ ê²½ê³„ì„ â€™ì´ì•¼."
    },
    frank: {
      oneline: "â€œí˜ì€ ì„¸ì§€ë§Œâ€¦ ë§ˆìŒì€ ë” ìˆœí•¨.â€",
      summary: "ë©ì¹˜/íŒŒì›Œ ë‹´ë‹¹ì¸ë° ì˜ì™¸ë¡œ ì†Œì‹¬í•˜ê³  ì°©í•œ íƒ€ì…. ë“ ë“ í•œ íƒ±ì»¤.",
      traits: ["í˜ ì„¸ì§€ë§Œ ìƒì²˜ ì˜ ë°›ìŒ", "ì • ë§ìŒ", "í˜¼ì ê³ ë¯¼"],
      actions: ["í•„ìš”í•  ë• ëª¸ìœ¼ë¡œ ë§‰ìŒ", "ì¹œêµ¬ í¸ ë“¤ì–´ì¤Œ", "ì¡°ìš©íˆ ì±™ê¹€"],
      match: ["ë¯¸ë¼ë´‰", "ìœ ë ¹ë´‰"],
      mismatch: ["íŒí‚¨ë´‰", "êµ¬ë¯¸í˜¸ë´‰"],
      comment: "ë„ˆëŠ” â€˜ë“ ë“ í•œ ê·€ì‹  íƒ±ì»¤â€™ì•¼."
    },
    pumpkin: {
      oneline: "â€œì‹¬ì‹¬í•œ ê±´ ëª» ì°¸ì§€!â€",
      summary: "ë¶„ìœ„ê¸° ë©”ì´ì»¤. ì¥ë‚œ, ë“œë¦½, í…ì…˜ìœ¼ë¡œ ê·€ì‹  ì‚¬íšŒë¥¼ ì‚´ë¦¬ëŠ” íƒ€ì….",
      traits: ["ìœ ì¾Œí•¨", "ë“œë¦½ë ¥", "ê°€ë³ê²Œ ì¹œí•´ì§"],
      actions: ["ë¶„ìœ„ê¸° ë„ìš°ê¸°", "ì¥ë‚œì¹˜ê¸°", "ìƒˆë¡œìš´ ì´ë²¤íŠ¸ ë§Œë“¤ê¸°"],
      match: ["ë°•ì¥ë´‰", "êµ¬ë¯¸í˜¸ë´‰"],
      mismatch: ["ì €ìŠ¹ë´‰", "ìœ„ì¹˜ë´‰"],
      comment: "ë„ˆ ì—†ìœ¼ë©´ ê·€ì‹  ì‚¬íšŒê°€ ë„ˆë¬´ ì¡°ìš©í•´ì ¸."
    },
    gumiho: {
      oneline: "â€œë‚´ê°€ íŒì„ í”ë“¤ì–´ë³¼ê¹Œ?â€",
      summary: "ë§¤ë ¥ê³¼ ì„¼ìŠ¤ë¡œ íŒì„ ì½ê³  ì›€ì§ì´ëŠ” íƒ€ì…. ëˆˆì¹˜ê°€ ë¹ ë¥´ê³  ì˜ë¦¬í•˜ë‹¤.",
      traits: ["ì„¼ìŠ¤", "í‘œì •/ë§íˆ¬ë¡œ ë¶„ìœ„ê¸° ì¡°ì ˆ", "ì˜ë¦¬í•¨"],
      actions: ["ì‚¬ëŒ ë§ˆìŒ ì½ê¸°", "í•„ìš”í•  ë•Œë§Œ ì¹˜ê³  ë¹ ì§", "ë“ ë  ë•Œ ì›€ì§ì„"],
      match: ["íŒí‚¨ë´‰", "ë°•ì¥ë´‰"],
      mismatch: ["ë¯¸ë¼ë´‰", "í”„ë‘ì¼„ë´‰"],
      comment: "ë„ˆëŠ” â€˜ê·€ì‹  ì‚¬íšŒì˜ ì™¸êµê´€â€™ ê°™ì€ ì¡´ì¬ì•¼."
    },
    count: {
      oneline: "â€œí’ˆê²©ì€ ì§€ì¼œì•¼ì§€.â€",
      summary: "ê³ ë…í•œ ì¹´ë¦¬ìŠ¤ë§ˆ. ì¡°ìš©íˆ ì¤‘ì‹¬ì„ ì¡ê³  ìê¸° ê¸°ì¤€ì´ í™•ì‹¤í•œ íƒ€ì….",
      traits: ["ë§ ìˆ˜ ì ìŒ", "ê¸°ì¤€ í™•ì‹¤", "í˜¼ì ìˆëŠ” ì‹œê°„ ì¤‘ìš”"],
      actions: ["í•„ìš”í•œ ë§ë§Œ í•¨", "ê±°ë¦¬ ìœ ì§€", "ê°€ë” í•œë§ˆë””ë¡œ ì •ë¦¬"],
      match: ["ìœ ë ¹ë´‰", "ìœ„ì¹˜ë´‰"],
      mismatch: ["íŒí‚¨ë´‰", "ë°•ì¥ë´‰"],
      comment: "ë„ˆëŠ” â€˜ê·€ì‹  ì‚¬íšŒì˜ ê·€ì¡±â€™ ê°™ì€ ë¶„ìœ„ê¸°ì•¼."
    }
  };

  /**********************
   * ì§ˆë¬¸ ë°ì´í„°(6ë¬¸í•­)
   **********************/
  const ghostQuestions = [
    {
      q: "ê·€ì‹  ì‚¬íšŒì— ì²˜ìŒ ì™”ë‹¤. ë„ˆì˜ ì²« í–‰ë™ì€?",
      options: [
        { text: "ì „ì²´ ìƒí™©ì„ í›‘ê³  ê·œì¹™ë¶€í„° íŒŒì•…í•œë‹¤", tag: "(ì „ëµí˜•)", scores: { witch: 3, reaper: 2 } },
        { text: "ì¼ë‹¨ ì¡°ìš©íˆ êµ¬ì„ì—ì„œ ë¶„ìœ„ê¸° ê´€ì°°", tag: "(ê´€ì°°í˜•)", scores: { ghost: 3, count: 2 } },
        { text: "ì¬ë°ŒëŠ” ê±° ì—†ë‚˜? ì‚¬ëŒë“¤í•œí…Œ ë§ ê±¸ê¸°", tag: "(í…ì…˜í˜•)", scores: { pumpkin: 3, bat: 2 } }
      ]
    },
    {
      q: "ëˆ„ê°€ ê°‘ìê¸° ì‹œë¹„ë¥¼ ê±¸ì—ˆë‹¤. ë„ˆëŠ”?",
      options: [
        { text: "ê·œì¹™ ìœ„ë°˜ì´ë©´ ë°”ë¡œ ì»·. ì„  ë„˜ì§€ ë§ˆ", tag: "(ë‹¨í˜¸í˜•)", scores: { reaper: 3, witch: 1 } },
        { text: "ë§ë¡œ ë¶€ë“œëŸ½ê²Œ ì •ë¦¬í•˜ê³  ìƒí™©ì„ í’€ì–´", tag: "(ì™¸êµí˜•)", scores: { gumiho: 3, count: 1 } },
        { text: "ê·¸ëƒ¥ ëª¸ìœ¼ë¡œ ë§‰ì•„ì¤€ë‹¤. ë‚´ ì¹œêµ¬ ê±´ë“¤ì§€ ë§ˆ", tag: "(ìˆ˜í˜¸í˜•)", scores: { frank: 3, mummy: 1 } }
      ]
    },
    {
      q: "ê·€ì‹  ì‚¬íšŒ íšŒì˜ ì¤‘. íšŒì˜ê°€ ì‚°ìœ¼ë¡œ ê°„ë‹¤â€¦",
      options: [
        { text: "í•µì‹¬ë§Œ ì •ë¦¬í•´ì„œ ë°©í–¥ì„ ë”± ì¡ì•„ì¤€ë‹¤", tag: "(ì •ë¦¬í˜•)", scores: { witch: 3, count: 1 } },
        { text: "ëê¹Œì§€ ë‚¨ì•„ì„œ í•´ê²°ë  ë•Œê¹Œì§€ ë²„í‹´ë‹¤", tag: "(ì§‘ë…í˜•)", scores: { mummy: 3, reaper: 1 } },
        { text: "ë¶„ìœ„ê¸° ì „í™˜ìœ¼ë¡œ íë¦„ì„ ë°”ê¿”ë²„ë¦°ë‹¤", tag: "(ë³€ì¹™í˜•)", scores: { bat: 3, pumpkin: 1 } }
      ]
    },
    {
      q: "ë„ˆì—ê²Œ ê°€ì¥ ì¤‘ìš”í•œ ê±´?",
      options: [
        { text: "ê¸°ì¤€ê³¼ ì§ˆì„œ", tag: "(ë£°ì¤‘ì‹œ)", scores: { reaper: 3, count: 2 } },
        { text: "ë¶„ìœ„ê¸°ì™€ ì¬ë¯¸", tag: "(ë¬´ë“œì¤‘ì‹œ)", scores: { pumpkin: 3, bat: 2 } },
        { text: "ê´€ê³„ì™€ ì •", tag: "(ì •ì¤‘ì‹œ)", scores: { frank: 3, gumiho: 2 } }
      ]
    },
    {
      q: "í˜¼ì ìˆëŠ” ì‹œê°„ì€ ë„ˆì—ê²Œ?",
      options: [
        { text: "ê¼­ í•„ìš”í•˜ë‹¤. í˜¼ìê°€ í¸í•¨", tag: "(ê³ ë…í˜•)", scores: { count: 3, ghost: 2 } },
        { text: "ê°€ë” í•„ìš”í•˜ì§€ë§Œ ì˜¤ë˜ëŠ” ì‹«ë‹¤", tag: "(ê· í˜•í˜•)", scores: { witch: 2, gumiho: 2 } },
        { text: "í˜¼ìë©´ ì‹¬ì‹¬í•´. ê°™ì´ ë†€ì", tag: "(ì‚¬êµí˜•)", scores: { pumpkin: 2, bat: 2 } }
      ]
    },
    {
      q: "ë§ˆì§€ë§‰ ì§ˆë¬¸! ë„ˆì˜ â€˜ê²°ì • ìŠ¤íƒ€ì¼â€™ì€?",
      options: [
        { text: "ë¹ ë¥´ê²Œ ê²°ì •. ì• ë§¤í•˜ë©´ ë°”ë¡œ ì •ë¦¬", tag: "(ê²°ë‹¨í˜•)", scores: { reaper: 3, witch: 2 } },
        { text: "ìƒëŒ€ ë°˜ì‘ì„ ë³´ë©° ìœ ì—°í•˜ê²Œ ì›€ì§ì„", tag: "(ìœ ì—°í˜•)", scores: { gumiho: 3, bat: 2 } },
        { text: "ê²°ì •ì€ ëŠë ¤ë„ ëê¹Œì§€ ì±…ì„ì§", tag: "(ì±…ì„í˜•)", scores: { mummy: 3, frank: 2 } }
      ]
    }
  ];

  /**********************
   * ìƒíƒœ
   **********************/
  let currentIndex = 0;
  let scoreState = { witch:0, mummy:0, bat:0, ghost:0, reaper:0, frank:0, pumpkin:0, gumiho:0, count:0 };
  let currentResultKey = "witch";

  /**********************
   * ìœ í‹¸
   **********************/
  function $(id){ return document.getElementById(id); }
  function showPage(id){
    document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
    $(id).classList.add("active");
  }
  function nl2br(str){ return String(str || "").replace(/\n/g, "<br>"); }
  function listToLines(arr){ if (!arr || !arr.length) return "-"; return arr.map(s => `â€¢ ${s}`).join("<br>"); }
  function setResultImage(url){ $("result-img").src = url; }
  function getCurrentMeta(){ return resultMeta[currentResultKey] || resultMeta.witch; }

  /**********************
   * ë Œë”: ì§ˆë¬¸
   **********************/
  function renderQuestion(){
    const q = ghostQuestions[currentIndex];
    $("q-title").textContent = q.q;

    const optWrap = $("q-options");
    optWrap.innerHTML = "";

    q.options.forEach((o) => {
      const btn = document.createElement("button");
      btn.className = "opt";
      btn.type = "button";
      btn.innerHTML = `<span>${o.text}</span><small>${o.tag}</small>`;
      btn.addEventListener("click", () => chooseOption(o));
      optWrap.appendChild(btn);
    });

    const total = ghostQuestions.length;
    const now = currentIndex + 1;
    $("progress-text").textContent = `${now} / ${total}`;
    $("progress-bar").style.width = `${Math.round((now/total)*100)}%`;
  }

  function chooseOption(option){
    const scores = option.scores || {};
    for (const [k,v] of Object.entries(scores)) {
      if (scoreState[k] == null) scoreState[k] = 0;
      scoreState[k] += v;
    }

    currentIndex += 1;
    if (currentIndex >= ghostQuestions.length) {
      showLoadingThenResult();
      return;
    }
    renderQuestion();
  }

  /**********************
   * ê²°ê³¼ ê³„ì‚°/ë Œë”
   **********************/
  function calculateResult(){
    let bestKey = "witch";
    let bestScore = -Infinity;

    for (const [k,v] of Object.entries(scoreState)) {
      if (v > bestScore) { bestScore = v; bestKey = k; }
    }
    return bestKey;
  }

  function renderResultDetail() {
    const meta = getCurrentMeta();
    const detail = resultDetail[currentResultKey] || resultDetail.witch;

    applyTheme(currentResultKey);

    document.getElementById("poster-header").textContent = meta.title;
    document.getElementById("result-title").textContent = meta.title;
    setResultImage(meta.imageUrl);

    document.getElementById("detail-oneline").innerHTML = nl2br(detail.oneline);
    document.getElementById("detail-summary").innerHTML = nl2br(detail.summary);
    document.getElementById("detail-traits").innerHTML = listToLines(detail.traits);
    document.getElementById("detail-actions").innerHTML = listToLines(detail.actions);

    // âœ… ë‹¨ì§/ì›ìˆ˜: 1ê°œì”©ë§Œ ì‚¬ìš©(ì²«ë²ˆì§¸ë§Œ) + ì´ë¯¸ì§€ë¡œ ì¢Œ/ìš° ë Œë”
    const buddyTitle = (detail.match && detail.match.length) ? detail.match[0] : "";
    const enemyTitle = (detail.mismatch && detail.mismatch.length) ? detail.mismatch[0] : "";

    const buddyImg = getImageUrlByTitle(buddyTitle);
    const enemyImg = getImageUrlByTitle(enemyTitle);

    const compatEl = document.getElementById("detail-compat");
    if (compatEl) {
      compatEl.innerHTML = `
        <div class="compat-grid">
          <div class="compat-item buddy">
            <div class="compat-wrap">
              <div class="compat-label">ë‹¨ì§</div>
              <img class="compat-thumb" src="${buddyImg}" alt="ë‹¨ì§ ìœ ë ¹" title="${buddyTitle}">
            </div>
          </div>
          <div class="compat-item enemy">
            <div class="compat-wrap">
              <div class="compat-label">ì›ìˆ˜</div>
              <img class="compat-thumb" src="${enemyImg}" alt="ì›ìˆ˜ ìœ ë ¹" title="${enemyTitle}">
            </div>
          </div>
        </div>
      `;
    }

    document.getElementById("detail-comment").innerHTML = nl2br(detail.comment);
  }

  function showLoadingThenResult(){
    showPage("page-loading");
    currentResultKey = calculateResult();
    setTimeout(() => {
      showPage("page-result");
      renderResultDetail();
    }, 900);
  }

  /**********************
   * ê³µìœ 
   **********************/
  function shareKakao(){
    const meta = getCurrentMeta();
    const desc = `${meta.desc}\n\nğŸ‘‰ í…ŒìŠ¤íŠ¸ í•˜ëŸ¬ê°€ê¸°\n${TEST_URL}`;

    Kakao.Share.sendDefault({
      objectType: "feed",
      content: {
        title: `ìœ ë ¹ ì„¸ìƒ ì† ë‚˜ëŠ”? - ${meta.title}`,
        description: desc,
        imageUrl: meta.imageUrl || `${SITE_URL}/img/og_default.png`,
        link: { mobileWebUrl: TEST_URL, webUrl: TEST_URL }
      }
    });
  }

  function shareX(){
    const meta = getCurrentMeta();
    const text = encodeURIComponent(`ìœ ë ¹ ì„¸ìƒ ì† ë‚˜ëŠ”? ê²°ê³¼: ${meta.title}\nğŸ‘‰ ${TEST_URL}`);
    window.open(`https://twitter.com/intent/tweet?text=${text}`, "_blank");
  }

  async function copyLink(){
    try{
      await navigator.clipboard.writeText(TEST_URL);
      $("copy-status").textContent = "ë§í¬ê°€ ë³µì‚¬ëì–´! ğŸ‘»";
    }catch(e){
      $("copy-status").textContent = "ë³µì‚¬ê°€ ë§‰í˜”ì–´. ì£¼ì†Œë¥¼ ì§ì ‘ ë³µì‚¬í•´ì¤˜: " + TEST_URL;
    }
  }

  /**********************
   * ì´ë²¤íŠ¸ ë°”ì¸ë”©
   **********************/
  $("btn-start").addEventListener("click", () => showPage("page-cover"));
  $("btn-go-tests").addEventListener("click", () => window.location.href = `${SITE_URL}/tests/`);
  $("btn-cover-start").addEventListener("click", () => {
    currentIndex = 0;
    Object.keys(scoreState).forEach(k => scoreState[k] = 0);
    showPage("page-quiz");
    renderQuestion();
  });
  $("btn-cover-back").addEventListener("click", () => showPage("page-home"));

  $("btn-retry").addEventListener("click", () => showPage("page-home"));
  $("btn-share-kakao").addEventListener("click", shareKakao);
  $("btn-share-x").addEventListener("click", shareX);
  $("btn-copy-link").addEventListener("click", copyLink);
  </script>
</body>
</html>
