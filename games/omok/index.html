<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>ì˜¤ëª©ì™•! ë©§ë´‰ì´ë¥¼ ì´ê²¨ë¼! - ì•ˆë‚´ & í”Œë ˆì´</title>

  <meta name="description" content="ì„¤ì¹˜ ì—†ì´ ë°”ë¡œ ì¦ê¸°ëŠ” 15Ã—15 ì˜¤ëª©! ê·œì¹™/ì „ëµ/ë Œì£¼ë£°(33 ê¸ˆì§€) ì•ˆë‚´ë¶€í„° ë©§ë´‰ì´ AIì™€ ì‹¤ì „ í”Œë ˆì´ê¹Œì§€ í•œ í˜ì´ì§€ì—ì„œ ì¦ê²¨ë³´ì„¸ìš”." />
  <link rel="canonical" href="https://bongstudiosad.com/games/omok/" />

  <!-- âœ… JSON-LD (ìŠ¹ì¸ìš©) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "ì˜¤ëª©ì™•! ë©§ë´‰ì´ë¥¼ ì´ê²¨ë¼!",
    "operatingSystem": "Web",
    "applicationCategory": "GameApplication",
    "genre": "Strategy, Board Game",
    "description": "ë´‰ ìŠ¤íŠœë””ì˜¤ì˜ ê³ ìœ  ìºë¦­í„° ì—¬ë´‰ì´ì™€ ë©§ë´‰ì´ê°€ ëŒ€ê²°í•˜ëŠ” 15x15 ì •í†µ ì˜¤ëª© ê²Œì„ì…ë‹ˆë‹¤. ë Œì£¼ë£°(33 ê¸ˆì§€) ê¸°ë°˜ìœ¼ë¡œ ê³µì •ì„±ì„ ê°•í™”í•˜ê³ , ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ AIê°€ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "KRW" },
    "publisher": { "@type": "Organization", "name": "ë´‰ ìŠ¤íŠœë””ì˜¤" }
  }
  </script>

  <!-- Google AdSense (ê¸°ì¡´ client ìœ ì§€) -->
  <script async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2371351351559028"
    crossorigin="anonymous"></script>

  <style>
    :root{
      --bg:#0b0f19;
      --card:rgba(255,255,255,.08);
      --line:rgba(255,255,255,.14);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.62);
      --btn:rgba(255,255,255,.10);
      --accent:#ff6b81;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background: radial-gradient(1200px 700px at 50% -100px, rgba(255,255,255,.14), transparent 65%),
                  radial-gradient(1000px 600px at 10% 110%, rgba(255,255,255,.10), transparent 60%),
                  var(--bg);
      color:var(--text);
    }

    /* NAV */
    .global-nav{
      position:sticky; top:0; z-index:1000;
      background:rgba(11,15,25,.75);
      backdrop-filter: blur(10px);
      border-bottom:1px solid rgba(255,255,255,.12);
    }
    .nav-inner{
      max-width:760px; margin:0 auto;
      padding:12px 14px;
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
    }
    .nav-logo{ font-weight:900; font-size:14px; color:#fff; text-decoration:none; }
    .nav-links a{
      margin-left:14px;
      font-size:13px; font-weight:800;
      color:rgba(255,255,255,.75);
      text-decoration:none;
    }
    .nav-links a:hover{ color:#fff; }

    .wrap{
      max-width:760px;
      margin:0 auto;
      padding:16px 14px 40px;
    }

    .hero{
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border-radius:20px;
      padding:16px 14px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
    }
    .hero h1{
      margin:0;
      font-size:20px;
      font-weight:1000;
      letter-spacing:-.2px;
    }
    .hero p{
      margin:8px 0 0;
      font-size:13px;
      color:var(--muted);
      line-height:1.55;
      font-weight:800;
    }

    /* âœ… ìš´ì˜ ì•ˆë‚´(ì• ë§¤í•œ ê´‘ê³ ìë¦¬ ë¬¸êµ¬ ì œê±°) */
    .notice-slot{
      margin-top:14px;
      border:1px solid rgba(255,255,255,.18);
      border-radius:18px;
      padding:14px 12px;
      background:rgba(255,255,255,.06);
      color:rgba(255,255,255,.75);
      text-align:left;
      line-height:1.55;
      font-weight:900;
    }
    .notice-slot .title{
      font-size:12px;
      color:rgba(255,255,255,.92);
      margin-bottom:6px;
      letter-spacing:-.1px;
    }
    .notice-slot .body{
      font-size:12px;
      color:rgba(255,255,255,.70);
      font-weight:800;
    }

    .btn-row{
      display:flex;
      gap:10px;
      margin-top:14px;
      flex-wrap:wrap;
    }
    .btn{
      appearance:none;
      border:1px solid rgba(255,255,255,.18);
      background:var(--btn);
      color:var(--text);
      padding:12px 14px;
      border-radius:16px;
      font-weight:1000;
      font-size:14px;
      cursor:pointer;
      user-select:none;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      flex:1;
      min-width:160px;
    }
    .btn.primary{
      background:rgba(255,255,255,.92);
      color:#0b0f19;
      border-color:rgba(255,255,255,.92);
    }
    .btn:active{ transform:translateY(1px); }

    .card{
      margin-top:14px;
      border:1px solid var(--line);
      background:var(--card);
      border-radius:20px;
      padding:14px 14px;
      box-shadow:0 12px 34px rgba(0,0,0,.22);
    }
    .card h2{
      margin:0 0 10px;
      font-size:16px;
      font-weight:1000;
      letter-spacing:-.2px;
    }
    .card h3{
      margin:16px 0 8px;
      font-size:13.5px;
      font-weight:1000;
      color:rgba(255,255,255,.92);
      padding-top:12px;
      border-top:1px solid rgba(255,255,255,.10);
    }
    .card p, .card li{
      font-size:12.8px;
      color:rgba(255,255,255,.76);
      line-height:1.75;
      font-weight:800;
    }
    .card ul{ margin:8px 0 0; padding-left:18px; display:grid; gap:8px; }

    .pill{
      display:inline-block;
      margin-top:10px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      font-size:12px;
      font-weight:1000;
      color:rgba(255,255,255,.88);
    }
    .pill b{ color:#fff; }

    /* =========================
       âœ… (ì „ëµ A) ì¸í˜ì´ì§€ í”Œë ˆì´ ì˜ì—­
       ========================= */

    /* í”Œë ˆì´ ì„¹ì…˜ ë ˆì´ì•„ì›ƒ */
    .play-shell{
      margin-top:14px;
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border-radius:20px;
      padding:14px 14px 16px;
      box-shadow:0 12px 34px rgba(0,0,0,.28);
    }

    .header{
      padding:12px 12px;
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border-radius:18px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
    }
    .topRow{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .title{ margin:0; font-size:18px; font-weight:1000; letter-spacing:-.2px; }
    .sub{ margin:6px 0 0; font-size:12px; color:var(--muted); line-height:1.35; font-weight:800; }
    .faces{ display:flex; align-items:center; gap:8px; flex-shrink:0; }
    .face{
      width:28px; height:28px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.25);
      background:rgba(255,255,255,.10);
      object-fit:cover;
    }
    .vs{ font-size:11px; color:var(--muted); font-weight:1000; }

    .controls{ margin-top:10px; display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    .chip{
      margin-left:auto;
      padding:9px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.18);
      background:var(--card);
      font-size:12px;
      font-weight:1000;
      color:var(--text);
      display:flex;
      align-items:center;
      gap:8px;
    }
    .dot{
      width:8px;height:8px;border-radius:999px;
      background:rgba(255,255,255,.85);
      box-shadow:0 0 0 4px rgba(255,255,255,.10);
    }

    .boardCard{
      margin-top:12px;
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.05));
      border-radius:20px;
      padding:8px;
      box-shadow:0 12px 34px rgba(0,0,0,.28);
    }
    .boardWrap{display:flex; align-items:center; justify-content:center; padding:0;}

    canvas{
      width:100%;
      height:auto;
      aspect-ratio:1 / 1;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.92);
      box-shadow:0 14px 28px rgba(0,0,0,.28);
      touch-action:none;
      max-height: calc(100svh - 320px);
    }

    .footerBar{
      margin-top:12px;
      border:1px solid var(--line);
      background:var(--card);
      border-radius:18px;
      padding:12px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .msg{ font-weight:1000; font-size:13px; letter-spacing:-.1px; }
    .hint{ font-size:12px; color:var(--muted); font-weight:900; white-space:nowrap; }

    /* MODAL */
    .modal-backdrop{
      position:fixed; inset:0;
      background:rgba(0,0,0,.55);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:9999;
    }
    .modal-backdrop.show{ display:flex; }
    .modal{
      width:min(420px, 92vw);
      border-radius:22px;
      border:1px solid rgba(255,255,255,.20);
      background:linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.08));
      box-shadow:0 22px 60px rgba(0,0,0,.55);
      padding:16px 16px 14px;
      backdrop-filter: blur(10px);
      transform: translateY(8px) scale(.98);
      opacity:.98;
      animation: pop .16s ease-out forwards;
    }
    @keyframes pop{ to{ transform: translateY(0) scale(1); opacity:1; } }
    .modalTitle{ margin:0; font-size:18px; font-weight:1000; letter-spacing:-.2px; }
    .modalDesc{ margin:8px 0 0; font-size:12px; color:var(--muted); font-weight:900; line-height:1.45; }
    .modalBtns{ display:flex; gap:8px; margin-top:14px; }
    .modalBtns .btn{ flex:1; justify-content:center; }

    /* Start choice */
    .choice-row{ display:flex; gap:8px; margin-top:12px; }
    .choice{
      flex:1;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.10);
      color:rgba(255,255,255,.92);
      padding:12px 12px;
      border-radius:16px;
      font-weight:1000;
      font-size:14px;
      cursor:pointer;
      user-select:none;
      text-align:center;
    }
    .choice small{
      display:block;
      margin-top:6px;
      font-weight:900;
      font-size:12px;
      color:rgba(255,255,255,.65);
      letter-spacing:-.1px;
    }
    .choice.active{
      background:rgba(255,255,255,.92);
      color:#0b0f19;
      border-color:rgba(255,255,255,.92);
    }
    .choice.active small{ color:rgba(11,15,25,.65); }

    /* 33 í† ìŠ¤íŠ¸ */
    .toast33{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      z-index:10050;
      pointer-events:none;
    }
    .toast33.show{ display:flex; }
    .toast33 .bubble{
      padding:12px 14px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.20);
      background:linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.08));
      box-shadow:0 18px 50px rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
      font-weight:1000;
      letter-spacing:-.2px;
      color:rgba(255,255,255,.95);
      transform: translateY(8px) scale(.98);
      animation: toastPop .14s ease-out forwards;
    }
    @keyframes toastPop{ to{ transform: translateY(0) scale(1); } }

    @media (max-width:480px){
      .btn{ font-size:13px; padding:12px 12px; }
      .sub{ display:none; }
      .header{ padding:10px 10px; }
      .controls{ margin-top:8px; gap:6px; }
      .chip{ padding:8px 10px; font-size:11px; }
      .footerBar{ padding:10px 12px; }
      canvas{ max-height: calc(100svh - 300px); }
    }
  </style>
</head>

<body>
  <nav class="global-nav">
    <div class="nav-inner">
      <a href="/" class="nav-logo">ì—¬ë´‰ì´ì˜ ë†€ì´í„°</a>
      <div class="nav-links">
        <a href="/tests/">ì„±í–¥í…ŒìŠ¤íŠ¸</a>
        <a href="/games/metbong-dodge/">ë©§ë´‰ì´ í”¼í•˜ê¸°</a>
      </div>
    </div>
  </nav>

  <main class="wrap">
    <!-- ì•ˆë‚´(ìƒë‹¨) -->
    <section class="hero">
      <h1>â™Ÿï¸ ì˜¤ëª©ì™•! ë©§ë´‰ì´ë¥¼ ì´ê²¨ë¼!</h1>
      <p>
        ì´ í˜ì´ì§€ëŠ” <b>ì˜¤ëª© ê·œì¹™/ì „ëµ/ë Œì£¼ë£°(33 ê¸ˆì§€)</b> ì•ˆë‚´ + <b>ì‹¤ì „ í”Œë ˆì´</b>ë¥¼ í•œ ë²ˆì— ì œê³µí•˜ëŠ” í†µí•© í˜ì´ì§€ì•¼.
        ì•„ë˜ ì•ˆë‚´ë¥¼ ë¹ ë¥´ê²Œ í›‘ê³ , ë°”ë¡œ ì•„ë˜ì—ì„œ ë©§ë´‰ì´ AIì™€ ëŒ€ê²°í•´ë´!
      </p>

      <div class="notice-slot" aria-label="ìš´ì˜ ì•ˆë‚´">
        <div class="title">ìš´ì˜ ì•ˆë‚´</div>
        <div class="body">
          ì´ í˜ì´ì§€ì—ëŠ” ì„œë¹„ìŠ¤ ìš´ì˜ì„ ìœ„í•œ ê´‘ê³ /ê³µì§€ ë°°ë„ˆê°€ í‘œì‹œë  ìˆ˜ ìˆì–´.<br/>
          <b>ê²Œì„ í”Œë ˆì´ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.</b>
        </div>
      </div>

      <div class="btn-row">
        <a class="btn primary" href="#play">â–¶ï¸ ì•„ë˜ì—ì„œ ë°”ë¡œ í”Œë ˆì´</a>
        <a class="btn" href="/tests/">ğŸ§ª í…ŒìŠ¤íŠ¸ ì„¼í„°</a>
      </div>

      <span class="pill">ê·œì¹™: <b>15Ã—15</b> Â· ìŠ¹ë¦¬ì¡°ê±´: <b>5ëª©</b> Â· ê³µì •ì„±: <b>33 ê¸ˆì§€(ë Œì£¼ë£°)</b></span>
    </section>

    <!-- ì•ˆë‚´ ì¹´ë“œ(ë‚´ìš© ìœ ì§€/í™•ì¥) -->
    <section class="card" id="guide">
      <h2>ì˜¤ëª© ê·œì¹™ & ë Œì£¼ë£°(33 ê¸ˆì§€) ë¹ ë¥¸ ì•ˆë‚´</h2>
      <p>
        ê¸°ë³¸ ê·œì¹™ì€ ê°„ë‹¨í•´. ë²ˆê°ˆì•„ ëŒì„ ë‘ê³ , <b>ë¨¼ì € 5ëª©ì„ ë§Œë“¤ë©´ ìŠ¹ë¦¬</b>ì•¼.
        ë‹¤ë§Œ â€œì„ ê³µì´ ìœ ë¦¬í•œ ê²Œì„â€ì´ë¼ ê³µì •ì„±ì„ ìœ„í•´ <b>ë Œì£¼ë£°(33 ê¸ˆì§€)</b>ë¥¼ ì ìš©í–ˆì–´.
      </p>

      <h3>33(ìŒì‚¼) ê¸ˆì§€ë€?</h3>
      <p>
        í•œ ìˆ˜ë¡œ ë™ì‹œì— â€œì—´ë¦° 3â€ì´ ë‘ ê°œ ì´ìƒ ë§Œë“¤ì–´ì§€ëŠ” í˜•íƒœ(ìŒì‚¼)ëŠ” ì„ ê³µì´ ë„ˆë¬´ ìœ ë¦¬í•´ì§ˆ ìˆ˜ ìˆì–´.
        ê·¸ë˜ì„œ ì´ í˜ì´ì§€ì˜ ì˜¤ëª©ì€ <b>33ì„ ê¸ˆì§€</b>í•´ì„œ ìŠ¹ë¶€ê°€ ì¡°ê¸ˆ ë” ì¬ë¯¸ìˆê²Œ ë‚˜ë„ë¡ ë§Œë“¤ì—ˆì–´.
      </p>

      <h3>ê¸°ë³¸ ì „ëµ</h3>
      <ul>
        <li><b>ì¤‘ì•™ ì¥ì•…</b>: ì¤‘ì•™ì„ ë¨¼ì € ì¡ìœ¼ë©´ ì—°ê²° ê°€ëŠ¥ì„±ì´ ë§ì•„ì§„ë‹¤</li>
        <li><b>ê³µê²©/ìˆ˜ë¹„ ê· í˜•</b>: ë‚´ 4ëª© ë§Œë“¤ê¸° + ìƒëŒ€ 4ëª© ì°¨ë‹¨ì„ ë™ì‹œì— ë³¸ë‹¤</li>
        <li><b>ë¯¸ë¼ ìˆ˜</b>: ìƒëŒ€ì˜ ìˆ˜ë¹„ë¥¼ ê°•ì œí•´ í…œí¬ë¥¼ ë¹¼ì•—ëŠ”ë‹¤</li>
      </ul>

      <h3>ì´ í˜ì´ì§€ AIëŠ” ì–´ë–»ê²Œ ì›€ì§ì´ë‚˜?</h3>
      <p>
        ë©§ë´‰ì´ AIëŠ” â€œì´ê¸¸ ìˆ˜ ìˆëŠ” ìˆ˜/ë§‰ì•„ì•¼ í•˜ëŠ” ìˆ˜â€ë¥¼ ìš°ì„ ìœ¼ë¡œ ë³´ê³ ,
        ìƒí™©ì— ë”°ë¼ í™•ë¥ ì ìœ¼ë¡œ ë‹¤ìŒ ìˆ˜ë¥¼ ì„ íƒí•´ ë‚œì´ë„ë¥¼ ì¡°ì ˆí•´.
        ê·¸ë˜ì„œ ë§¤ íŒì´ ë˜‘ê°™ì´ í˜ëŸ¬ê°€ì§€ ì•Šê²Œ ì„¤ê³„í–ˆì–´.
      </p>
    </section>

    <!-- âœ… (ì „ëµ A) ì¸í˜ì´ì§€ í”Œë ˆì´ -->
    <section class="play-shell" id="play" aria-label="ì˜¤ëª© í”Œë ˆì´ ì˜ì—­">
      <div class="header">
        <div class="topRow">
          <div>
            <h2 class="title" style="margin:0;">ë©§ë´‰ì´ë¥¼ ì´ê²¨ë¼! (ì‹¤ì „ í”Œë ˆì´)</h2>
            <div class="sub">í•œ ë²ˆ ëˆŒëŸ¬ì„œ ëŒ ë†“ê¸° Â· 5ëª© ë¨¼ì € ë§Œë“¤ë©´ ìŠ¹ë¦¬ Â· 33(ìŒì‚¼) ê¸ˆì§€</div>
          </div>
          <div class="faces">
            <img class="face" id="p1Face" alt="ì—¬ë´‰ì´" />
            <span class="vs">VS</span>
            <img class="face" id="p2Face" alt="ë©§ë´‰ì´" />
          </div>
        </div>

        <div class="controls">
          <button class="btn primary" id="resetBtn">ë‹¤ì‹œí•˜ê¸°</button>
          <button class="btn" id="toggleFirstBtn">ì„ ê³µ: ì—¬ë´‰ì´</button>
          <div class="chip" id="turnChip"><span class="dot"></span><span>ì—¬ë´‰ì´ ì°¨ë¡€</span></div>
        </div>
      </div>

      <div class="boardCard">
        <div class="boardWrap">
          <canvas id="board" width="900" height="900" aria-label="ì˜¤ëª©íŒ"></canvas>
        </div>
      </div>

      <div class="footerBar">
        <div class="msg" id="msg">ì„ ê³µì„ ì„ íƒí•˜ê³  ì‹œì‘í•˜ê¸° ëˆŒëŸ¬ì¤˜!</div>
        <div class="hint" id="hint">15Ã—15</div>
      </div>

      <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;">
        <a class="btn" href="#guide">â† ê·œì¹™/ì „ëµìœ¼ë¡œ</a>
        <a class="btn" href="/games/metbong-dodge/">ë©§ë´‰ì´ í”¼í•˜ê¸°</a>
      </div>
    </section>

    <!-- Result modal -->
    <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true">
      <div class="modal">
        <h2 class="modalTitle" id="modalTitle">ìŠ¹ë¦¬!</h2>
        <div class="modalDesc" id="modalDesc">ë‹¤ì‹œ í•œ íŒ ê°€ì ğŸ˜</div>
        <div class="modalBtns">
          <button class="btn primary" id="modalRestartBtn">ë‹¤ì‹œí•˜ê¸°</button>
          <button class="btn" id="modalCloseBtn">ë‹«ê¸°</button>
        </div>
      </div>
    </div>

    <!-- Start modal -->
    <div class="modal-backdrop" id="startBackdrop" role="dialog" aria-modal="true">
      <div class="modal">
        <h2 class="modalTitle">ì„ ê³µ ì„ íƒ</h2>
        <div class="modalDesc">ëˆ„ê°€ ë¨¼ì € ë‘˜ë˜? ì„ íƒí•˜ê³  <b>ì‹œì‘í•˜ê¸°</b> ëˆ„ë¥´ë©´ ë°”ë¡œ ì‹œì‘!</div>

        <div class="choice-row" id="startChoices">
          <div class="choice active" data-first="PLAYER">ë‚˜ (ì—¬ë´‰ì´)<small>ë¨¼ì € ë‘ê³  ì‹œì‘</small></div>
          <div class="choice" data-first="AI">ë©§ë´‰ì´<small>ìƒëŒ€ê°€ ë¨¼ì € ë‘ </small></div>
        </div>

        <div class="modalBtns">
          <button class="btn primary" id="startBtn">ì‹œì‘í•˜ê¸°</button>
        </div>
      </div>
    </div>

    <!-- 33 í† ìŠ¤íŠ¸ -->
    <div class="toast33" id="toast33" aria-live="polite">
      <div class="bubble" id="toast33Text">33ì€ ì•ˆë¼!</div>
    </div>

    <!-- í•˜ë‹¨ ì‹ ë¢° ì¹´ë“œ -->
    <section class="card" style="margin-top:14px;">
      <h2>í•œ ì¤„ ìš”ì•½</h2>
      <p>
        ì´ ì˜¤ëª©ì€ <b>ë Œì£¼ë£°(33 ê¸ˆì§€)</b>ì„ ì ìš©í•´ ì„ ê³µ í¸í–¥ì„ ì¤„ì˜€ê³ ,
        ë¸Œë¼ìš°ì €ì—ì„œ ë°”ë¡œ ì‹¤í–‰ë˜ëŠ” <b>ìºì£¼ì–¼ AI ëŒ€ì „</b>ì´ì•¼.
        ì¹œêµ¬ë‘ â€œì„ ê³µ ë°”ê¿”ê°€ë©°â€ í•´ë³´ë©´ ì²´ê°ì´ í™• ë‹¬ë¼ì ¸!
      </p>
    </section>

  </main>

<script>
(() => {
  const SIZE = 15;
  const WIN = 5;

  const PLAYER = 1;
  const AI = 2;

  const IMG_P1 = "/img/omok_player.png";
  const IMG_P2 = "/img/omok_ai.png";

  const TARGET_WIN_RATE = 0.20;
  const AI_MIN = 0.68;
  const AI_MAX = 0.99;
  const MAX_SOFT_CHOICE = 6;

  const LS_KEY = "yeobong_omok_flash_15x15_hard_v1";
  const AI_DELAY = 700;

  const canvas = document.getElementById("board");
  const ctx = canvas.getContext("2d");

  function lockScroll(lock){
    document.documentElement.style.overflow = lock ? "hidden" : "";
    document.body.style.overflow = lock ? "hidden" : "";
    document.body.style.position = lock ? "fixed" : "";
    document.body.style.width = lock ? "100%" : "";
    document.body.style.touchAction = lock ? "none" : "";
  }

  let board = Array.from({ length: SIZE }, () => Array(SIZE).fill(0));
  let gameStarted = false;
  let gameOver = false;

  let firstPlayer = PLAYER;
  let turn = PLAYER;
  let lastMove = null;

  let results = [];
  let difficulty = 0.90;

  const resetBtn = document.getElementById("resetBtn");
  const toggleFirstBtn = document.getElementById("toggleFirstBtn");
  const turnChip = document.getElementById("turnChip");
  const msgEl = document.getElementById("msg");

  const modalBackdrop = document.getElementById("modalBackdrop");
  const modalTitle = document.getElementById("modalTitle");
  const modalDesc = document.getElementById("modalDesc");
  const modalRestartBtn = document.getElementById("modalRestartBtn");
  const modalCloseBtn = document.getElementById("modalCloseBtn");

  const startBackdrop = document.getElementById("startBackdrop");
  const startChoices = document.getElementById("startChoices");
  const startBtn = document.getElementById("startBtn");

  const toast33 = document.getElementById("toast33");
  const toast33Text = document.getElementById("toast33Text");
  let toastTimer = null;

  function showToast33(text="33ì€ ì•ˆë¼!", ms=1500){
    toast33Text.textContent = text;
    toast33.classList.add("show");
    if(toastTimer) clearTimeout(toastTimer);
    toastTimer = setTimeout(() => toast33.classList.remove("show"), ms);
  }

  const p1Face = document.getElementById("p1Face");
  const p2Face = document.getElementById("p2Face");
  p1Face.src = IMG_P1;
  p2Face.src = IMG_P2;

  function setMsg(t){ msgEl.textContent = t; }
  function clamp(v,a,b){ return Math.max(a, Math.min(b, v)); }
  function nameOf(p){ return p === PLAYER ? "ì—¬ë´‰ì´" : "ë©§ë´‰ì´"; }

  function openModal(title, desc){
    modalTitle.textContent = title;
    modalDesc.textContent = desc;
    modalBackdrop.classList.add("show");
    lockScroll(false);
  }
  function closeModal(){
    modalBackdrop.classList.remove("show");
    if(gameStarted && !gameOver) lockScroll(true);
  }

  function openStartModal(){
    startBackdrop.classList.add("show");
    lockScroll(false);
  }
  function closeStartModal(){
    startBackdrop.classList.remove("show");
    if(gameStarted && !gameOver) lockScroll(true);
  }

  function setControlsEnabled(on){
    resetBtn.disabled = !on;
    toggleFirstBtn.disabled = !on;
  }

  function loadState(){
    try{
      const raw = localStorage.getItem(LS_KEY);
      if(!raw) return;
      const s = JSON.parse(raw);
      if(Array.isArray(s.results)) results = s.results.filter(x => x==="W" || x==="L").slice(-10);
      if(typeof s.difficulty === "number") difficulty = clamp(s.difficulty, AI_MIN, AI_MAX);
      if(s.firstPlayer === PLAYER || s.firstPlayer === AI) firstPlayer = s.firstPlayer;
    }catch(e){}
  }
  function saveState(){
    localStorage.setItem(LS_KEY, JSON.stringify({ results, difficulty, firstPlayer }));
  }

  loadState();
  turn = firstPlayer;

  function setTurnUI(){
    const label = (turn === PLAYER) ? "ì—¬ë´‰ì´ ì°¨ë¡€" : "ë©§ë´‰ì´ ìƒê°ì¤‘â€¦";
    turnChip.innerHTML = `<span class="dot"></span><span>${label}</span>`;
    toggleFirstBtn.textContent = `ì„ ê³µ: ${nameOf(firstPlayer)}`;
  }

  function resizeCanvas(){
    const rect = canvas.getBoundingClientRect();
    const cssSize = Math.floor(Math.min(rect.width, rect.height));
    const dpr = window.devicePixelRatio || 1;

    canvas.width  = Math.floor(cssSize * dpr);
    canvas.height = Math.floor(cssSize * dpr);
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

    return cssSize;
  }

  let CANVAS_SIZE = 0;
  let margin = 0;
  let gridSize = 0;
  let cell = 0;
  let r = 0;

  function updateMetrics(){
    CANVAS_SIZE = resizeCanvas();
    margin = CANVAS_SIZE * 0.06;
    gridSize = CANVAS_SIZE - margin * 2;
    cell = gridSize / (SIZE - 1);
    r = cell * 0.48;
  }

  updateMetrics();

  const img1 = new Image(); img1.src = IMG_P1;
  const img2 = new Image(); img2.src = IMG_P2;

  function pointerToCell(clientX, clientY){
    const rect = canvas.getBoundingClientRect();
    const scale = CANVAS_SIZE / rect.width;
    const x = (clientX - rect.left) * scale;
    const y = (clientY - rect.top) * scale;

    const min = margin - cell * 0.4;
    const max = margin + cell * (SIZE - 1) + cell * 0.4;
    if (x < min || x > max || y < min || y > max) return null;

    const gx = Math.round((x - margin) / cell);
    const gy = Math.round((y - margin) / cell);

    return { x: clamp(gx, 0, SIZE - 1), y: clamp(gy, 0, SIZE - 1) };
  }

  function inRange(x,y){ return x>=0 && x<SIZE && y>=0 && y<SIZE; }
  function countDir(x,y,dx,dy,p){
    let c=0, nx=x+dx, ny=y+dy;
    while(inRange(nx,ny) && board[ny][nx]===p){ c++; nx+=dx; ny+=dy; }
    return c;
  }
  function isWin(x,y,p){
    const dirs = [[1,0],[0,1],[1,1],[1,-1]];
    for(const [dx,dy] of dirs){
      const line = 1 + countDir(x,y,dx,dy,p) + countDir(x,y,-dx,-dy,p);
      if(line >= WIN) return true;
    }
    return false;
  }
  function isDraw(){
    for(let y=0;y<SIZE;y++) for(let x=0;x<SIZE;x++) if(board[y][x]===0) return false;
    return true;
  }

  function drawGrid(){
    const W = CANVAS_SIZE;
    ctx.clearRect(0,0,W,W);
    ctx.fillStyle = "rgba(255,255,255,.92)";
    ctx.fillRect(0,0,W,W);

    ctx.lineWidth = 1;
    ctx.strokeStyle = "rgba(0,0,0,.12)";
    for(let i=0;i<SIZE;i++){
      const px = margin + i*cell;
      const py = margin + i*cell;
      ctx.beginPath(); ctx.moveTo(px, margin); ctx.lineTo(px, margin+(SIZE-1)*cell); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(margin, py); ctx.lineTo(margin+(SIZE-1)*cell, py); ctx.stroke();
    }

    const stars = [{x:3,y:3},{x:11,y:3},{x:7,y:7},{x:3,y:11},{x:11,y:11}];
    ctx.fillStyle = "rgba(0,0,0,.22)";
    for(const s of stars){
      ctx.beginPath();
      ctx.arc(margin + s.x*cell, margin + s.y*cell, 3.6, 0, Math.PI*2);
      ctx.fill();
    }
  }

  function drawFallbackStone(cx, cy, rr, player){
    ctx.beginPath();
    ctx.arc(cx, cy, rr, 0, Math.PI*2);
    ctx.fillStyle = (player === PLAYER) ? "#ffffff" : "#0b0f19";
    ctx.fill();
    ctx.lineWidth = 2;
    ctx.strokeStyle = (player === PLAYER) ? "rgba(0,0,0,.35)" : "rgba(255,255,255,.35)";
    ctx.stroke();
  }

  function drawStone(x, y, p, isLast){
    const img = (p === PLAYER) ? img1 : img2;
    const cx = margin + x * cell;
    const cy = margin + y * cell;

    const canUseImage = img && img.complete && (img.naturalWidth > 0 || img.width > 0);

    if (canUseImage){
      ctx.beginPath();
      ctx.arc(cx, cy, r, 0, Math.PI * 2);
      ctx.fillStyle = (p === PLAYER) ? "#ffffff" : "#0b0f19";
      ctx.fill();

      ctx.save();
      ctx.beginPath();
      ctx.arc(cx, cy, r, 0, Math.PI * 2);
      ctx.clip();

      const inner = r * 0.78;
      const iw = img.naturalWidth || img.width;
      const ih = img.naturalHeight || img.height;
      const box = inner * 2;
      const scale = Math.min(box / iw, box / ih);

      const dw = iw * scale;
      const dh = ih * scale;

      const yOffset = r * 0.06;
      ctx.drawImage(img, cx - dw/2, cy - dh/2 + yOffset, dw, dh);
      ctx.restore();

      const ring = Math.max(3, r * 0.14);
      ctx.lineWidth = ring;
      ctx.strokeStyle = (p === PLAYER) ? "#ffffff" : "#0b0f19";
      ctx.beginPath();
      ctx.arc(cx, cy, r - ring/2, 0, Math.PI*2);
      ctx.stroke();
    } else {
      drawFallbackStone(cx, cy, r, p);
    }

    if(isLast){
      ctx.lineWidth = Math.max(2, r * 0.16);
      ctx.strokeStyle = (p === PLAYER) ? "rgba(255,107,129,.95)" : "rgba(14,165,233,.95)";
      ctx.beginPath();
      ctx.arc(cx, cy, r + 1, 0, Math.PI*2);
      ctx.stroke();
    }
  }

  function render(){
    drawGrid();
    for(let y=0;y<SIZE;y++){
      for(let x=0;x<SIZE;x++){
        const p = board[y][x];
        if(p !== 0){
          const isLast = lastMove && lastMove.x===x && lastMove.y===y;
          drawStone(x,y,p,isLast);
        }
      }
    }
  }

  function resetBoard(){
    board = Array.from({ length: SIZE }, () => Array(SIZE).fill(0));
    lastMove = null;
    gameOver = false;
    turn = firstPlayer;
    gameStarted = false;

    setControlsEnabled(true);
    setMsg("ì„ ê³µì„ ì„ íƒí•˜ê³  ì‹œì‘í•˜ê¸° ëˆŒëŸ¬ì¤˜!");
    setTurnUI();
    render();
    openStartModal();
  }

  function addResult(r){
    results.push(r);
    results = results.slice(-10);

    const recent = results.join("");
    const wins = results.filter(x=>x==="W").length;
    const total = results.length || 1;
    const winRate = wins / total;

    const k = 0.12;
    if (winRate > TARGET_WIN_RATE) difficulty = clamp(difficulty + k, AI_MIN, AI_MAX);
    else difficulty = clamp(difficulty - k, AI_MIN, AI_MAX);

    saveState();
  }

  function openEnd(winner){
    gameOver = true;
    setControlsEnabled(true);
    lockScroll(false);

    if(winner === PLAYER) addResult("W");
    else if(winner === AI) addResult("L");

    if(winner === PLAYER) openModal("ìŠ¹ë¦¬!", "ë©§ë´‰ì´ë¥¼ ì´ê²¼ë‹¤! ğŸ˜");
    else if(winner === AI) openModal("íŒ¨ë°°!", "ë©§ë´‰ì´ê°€ í•œ ìˆ˜ ìœ„ì˜€ì–´â€¦ ğŸ˜µ");
    else openModal("ë¬´ìŠ¹ë¶€!", "ë¹„ê²¼ë‹¤! ë‹¤ì‹œ í•œ íŒ?");
  }

  function isForbidden33(x,y,p){
    // ê°„ë‹¨ ê¸ˆì§€: í”Œë ˆì´ì–´(ì„ ê³µ)ì—ê²Œë§Œ ì ìš©
    if(p !== PLAYER) return false;

    // ì„ì‹œë¡œ ëŒ ë‘ê³  ì—´ë¦°3 ê°œìˆ˜ ê³„ì‚°
    board[y][x] = p;

    function openThreeCount(){
      let cnt = 0;
      const dirs = [[1,0],[0,1],[1,1],[1,-1]];
      for(const [dx,dy] of dirs){
        // íŒ¨í„´: 0 1 1 1 0 í˜•íƒœë¥¼ ë‹¨ìˆœ ì²´í¬(ê·¼ì‚¬)
        // ì¤‘ì‹¬ ê¸°ì¤€ìœ¼ë¡œ 4ì¹¸ ë²”ìœ„ ê²€ì‚¬
        let line = [];
        for(let k=-4;k<=4;k++){
          const nx = x + dx*k;
          const ny = y + dy*k;
          if(!inRange(nx,ny)) line.push(9);
          else line.push(board[ny][nx]);
        }
        // ì¤‘ì‹¬ì´ 4 ì¸ë±ìŠ¤
        // 0 1 1 1 0 ì°¾ê¸°
        for(let i=0;i<=line.length-5;i++){
          const seg = line.slice(i,i+5);
          if(seg[0]===0 && seg[1]===p && seg[2]===p && seg[3]===p && seg[4]===0){
            cnt++;
            break;
          }
        }
      }
      return cnt;
    }

    const c = openThreeCount();
    board[y][x] = 0;
    return c >= 2;
  }

  function placeStone(x,y,p){
    if(board[y][x] !== 0) return false;
    if(isForbidden33(x,y,p)){
      showToast33("33ì€ ì•ˆë¼!");
      return false;
    }

    board[y][x] = p;
    lastMove = {x,y,p};

    render();

    if(isWin(x,y,p)){
      openEnd(p);
      return true;
    }
    if(isDraw()){
      openEnd(0);
      return true;
    }

    turn = (p === PLAYER) ? AI : PLAYER;
    setTurnUI();
    return true;
  }

  function scoreMove(x,y,p){
    // ë‹¨ìˆœ íœ´ë¦¬ìŠ¤í‹±: ì¦‰ì‹œìŠ¹/ì¦‰ì‹œì°¨ë‹¨ ìš°ì„ 
    // ê³µê²© ë¼ì¸ + ìˆ˜ë¹„ ë¼ì¸ ì ìˆ˜ í•©ì‚°
    const dirs = [[1,0],[0,1],[1,1],[1,-1]];

    function lineScore(pp){
      let s = 0;
      for(const [dx,dy] of dirs){
        const a = countDir(x,y,dx,dy,pp);
        const b = countDir(x,y,-dx,-dy,pp);
        const len = 1 + a + b;
        if(len >= 5) s += 100000;
        else if(len === 4) s += 2500;
        else if(len === 3) s += 260;
        else if(len === 2) s += 40;
        else s += 6;
      }
      return s;
    }

    // ì¤‘ì•™ ë³´ì •
    const cx = (SIZE-1)/2, cy = (SIZE-1)/2;
    const dist = Math.abs(x-cx) + Math.abs(y-cy);
    const centerBonus = Math.max(0, 14 - dist);

    // AIëŠ” ê³µê²© + ë°©ì–´
    const attack = lineScore(p);
    const defend = lineScore(p === AI ? PLAYER : AI) * 0.92;

    return attack + defend + centerBonus;
  }

  function listCandidates(){
    // ì£¼ë³€ì— ëŒì´ ìˆëŠ” ê³³ë§Œ í›„ë³´ë¡œ(ì†ë„)
    const cand = [];
    const R = 2;
    let any = false;

    for(let y=0;y<SIZE;y++){
      for(let x=0;x<SIZE;x++){
        if(board[y][x] !== 0) any = true;
      }
    }
    if(!any){
      // ì²« ìˆ˜ëŠ” ì¤‘ì•™ ì£¼ë³€
      cand.push({x:7,y:7});
      cand.push({x:7,y:6});
      cand.push({x:6,y:7});
      cand.push({x:8,y:7});
      cand.push({x:7,y:8});
      return cand;
    }

    for(let y=0;y<SIZE;y++){
      for(let x=0;x<SIZE;x++){
        if(board[y][x] !== 0) continue;

        let near = false;
        for(let yy=Math.max(0,y-R); yy<=Math.min(SIZE-1,y+R) && !near; yy++){
          for(let xx=Math.max(0,x-R); xx<=Math.min(SIZE-1,x+R); xx++){
            if(board[yy][xx] !== 0){ near = true; break; }
          }
        }
        if(near) cand.push({x,y});
      }
    }
    return cand;
  }

  function aiMove(){
    if(gameOver) return;

    const cand = listCandidates();
    const scored = [];

    for(const c of cand){
      // AIëŠ” 33 ì œí•œ ì—†ìŒ
      const s = scoreMove(c.x,c.y,AI);
      scored.push({ ...c, s });
    }
    scored.sort((a,b)=>b.s - a.s);

    // â€œê°•í•˜ê²Œâ€ ê³ ë¥´ë˜, ê°€ë” ìƒìœ„ í›„ë³´ ì¤‘ ëœë¤
    const top = scored.slice(0, Math.max(2, MAX_SOFT_CHOICE));
    const softness = clamp(1 - difficulty, 0, 0.32);
    const pickRange = clamp(1 + Math.floor(softness * top.length), 1, top.length);
    const idx = Math.floor(Math.random() * pickRange);
    const choice = top[idx] || scored[0];

    if(choice){
      placeStone(choice.x, choice.y, AI);
    }
  }

  canvas.addEventListener("pointerdown", (e) => {
    if(gameOver) return;
    if(turn !== PLAYER) return;

    const cellPos = pointerToCell(e.clientX, e.clientY);
    if(!cellPos) return;

    const ok = placeStone(cellPos.x, cellPos.y, PLAYER);
    if(ok){
      gameStarted = true;
      lockScroll(true);
      setControlsEnabled(false);

      if(turn === AI && !gameOver){
        setTimeout(aiMove, AI_DELAY);
      }
    }
  });

  resetBtn.addEventListener("click", () => resetBoard());

  toggleFirstBtn.addEventListener("click", () => {
    firstPlayer = (firstPlayer === PLAYER) ? AI : PLAYER;
    saveState();
    resetBoard();
  });

  modalRestartBtn.addEventListener("click", () => {
    closeModal();
    resetBoard();
  });
  modalCloseBtn.addEventListener("click", () => closeModal());

  startChoices.addEventListener("click", (e) => {
    const el = e.target.closest(".choice");
    if(!el) return;
    startChoices.querySelectorAll(".choice").forEach(x=>x.classList.remove("active"));
    el.classList.add("active");
    firstPlayer = (el.dataset.first === "AI") ? AI : PLAYER;
  });

  startBtn.addEventListener("click", () => {
    closeStartModal();
    saveState();
    resetBoard(); // ìƒíƒœ ë°˜ì˜ + ìƒˆ ì‹œì‘
    closeStartModal();

    // ì²« í„´ì´ AIë©´ ë°”ë¡œ ë‘ 
    gameStarted = true;
    gameOver = false;
    turn = firstPlayer;
    setTurnUI();
    render();
    lockScroll(true);
    setControlsEnabled(false);

    if(turn === AI){
      setTimeout(aiMove, AI_DELAY);
    }
  });

  window.addEventListener("resize", () => {
    updateMetrics();
    render();
  });

  setTurnUI();
  render();
  openStartModal();
})();
</script>

</body>
</html>
